!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("siick",[],e):"object"==typeof exports?exports.siick=e():t.siick=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/dist/",e(e.s=31)}([function(t,e,n){"use strict";n(1),n(32),n(33),n(18);var r=n(34),i=n(35),o=(n(36),n(19)),a=n(20);n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i}),n.d(e,"c",function(){return o}),n.d(e,"d",function(){return a})},function(t,e,n){"use strict";n.d(e,"a",function(){return i});const r=1e-6;e.b=r;let i="undefined"!=typeof Float32Array?Float32Array:Array;const o=Math.random;e.c=o;Math.PI},function(t,e,n){"use strict";(function(t){n(17);var r=n(0),i=n(37);let o;class a{constructor(t){this._initialize()}_initialize(){this.ratio=t.devicePixelRatio,o=canvas.getContext("webgl2",{antialias:!1}),this.perModel=new i.a([...r.a.create(),...r.a.create()]),this.perScene=new i.a([...r.a.create(),...r.a.create()]),this.directional=new i.a(new Float32Array(a.MAX_LIGHTS*a.LIGHT_DATA_CHUNK_SIZE))}_initializeBuffers(t){t.objects.forEach(t=>{const e=t.geometry,n=s(),r=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,r),n.bufferData(n.ARRAY_BUFFER,new Float32Array(e.positions),n.STATIC_DRAW);const i=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,i),n.bufferData(n.ARRAY_BUFFER,new Float32Array(e.normals),n.STATIC_DRAW);let o;e.indices&&e.indices.length&&(o=n.createBuffer(),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,o),n.bufferData(n.ELEMENT_ARRAY_BUFFER,new Uint16Array(e.indices),n.STATIC_DRAW));const a=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,a),n.bufferData(n.ARRAY_BUFFER,new Float32Array(e.uvs),n.STATIC_DRAW),t.buffers={positions:r,indices:o,normals:i,uvs:a}})}postInitialize(t){this._initializeBuffers(t)}setRatio(t){this.ratio=t}_renderObject(t,e,n){const i=t.material,o=i.program;i.activate(),i.setUniform("numLights",e.lights.length);const a=s(),u=a.getUniformBlockIndex(o,"perModel"),c=a.getUniformBlockIndex(o,"perScene"),l=a.getUniformBlockIndex(o,"directional");a.uniformBlockBinding(o,c,this.perScene.location),a.uniformBlockBinding(o,u,this.perModel.location),a.uniformBlockBinding(o,l,this.directional.location);const h=t.modelMatrix,f=r.a.create(),d=r.a.create();r.a.multiply(d,n.viewMatrix,h),r.a.invert(f,d),r.a.transpose(f,f),this.perModel.update([...h,...f]),i.setInternalUniforms(),a.bindBuffer(a.ARRAY_BUFFER,t.buffers.uvs),a.enableVertexAttribArray(t.material.programInfo.attribLocations.uv),a.vertexAttribPointer(t.material.programInfo.attribLocations.uv,2,a.FLOAT,!1,0,0),a.bindBuffer(a.ARRAY_BUFFER,t.buffers.normals),a.enableVertexAttribArray(t.material.programInfo.attribLocations.normal),a.vertexAttribPointer(t.material.programInfo.attribLocations.normal,3,a.FLOAT,!1,0,0),a.bindBuffer(a.ARRAY_BUFFER,t.buffers.positions),a.enableVertexAttribArray(t.material.programInfo.attribLocations.position),a.vertexAttribPointer(t.material.programInfo.attribLocations.position,3,a.FLOAT,!1,0,0),t.buffers.indices?(a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,t.buffers.indices),a.drawElements(a.TRIANGLES,t.indexCount,a.UNSIGNED_SHORT,0)):(a.bindBuffer(a.ARRAY_BUFFER,t.buffers.positions),a.drawArrays(a.TRIANGLES,0,t.geometry.positions.length/3))}_internalRender(t,e){this.perScene.bind(),this.directional.bind(),this.perModel.bind(),this.perScene.update([...e.viewMatrix,...e.projectionMatrix]);for(let n=0;n<t.lights.length;n++){const i=t.lights[n].position,o=r.d.fromValues(i[0],i[1],i[2],1),s=t.lights[n].modelMatrix,u=r.a.create();r.a.multiply(u,e.viewMatrix,s);const c=r.d.create();r.d.transformMat4(c,o,e.viewMatrix),this.directional.update([...t.lights[n].color,...[t.lights[n].intensity,0,0,0],...c],n*a.LIGHT_DATA_CHUNK_SIZE)}t.objects.forEach(n=>{this._renderObject(n,t,e)})}render(t,e){const n=s();n.viewport(0,0,n.canvas.width,n.canvas.height),n.clearColor(0,0,0,1),n.clearDepth(1),n.enable(n.CULL_FACE),n.enable(n.DEPTH_TEST),n.depthFunc(n.LEQUAL),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),e.update(),t.traverse(e),this._internalRender(t,e)}}a.LIGHT_DATA_CHUNK_SIZE=12,a.MAX_LIGHTS=16;const s=()=>o;e.b=s,e.a=a}).call(e,n(3))},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";function r(t){if(!(this instanceof r))return new r(t);c.call(this,t),l.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",i)}function i(){this.allowHalfOpen||this._writableState.ended||a(o,this)}function o(t){t.end()}var a=n(8),s=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};t.exports=r;var u=n(7);u.inherits=n(5);var c=n(25),l=n(15);u.inherits(r,c);for(var h=s(l.prototype),f=0;f<h.length;f++){var d=h[f];r.prototype[d]||(r.prototype[d]=l.prototype[d])}Object.defineProperty(r.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),r.prototype._destroy=function(t,e){this.push(null),this.end(),a(e,t)}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(t){if(l===setTimeout)return setTimeout(t,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(e){try{return l.call(null,t,0)}catch(e){return l.call(this,t,0)}}}function o(t){if(h===clearTimeout)return clearTimeout(t);if((h===r||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{return h(t)}catch(e){try{return h.call(null,t)}catch(e){return h.call(this,t)}}}function a(){m&&d&&(m=!1,d.length?p=d.concat(p):v=-1,p.length&&s())}function s(){if(!m){var t=i(a);m=!0;for(var e=p.length;e;){for(d=p,p=[];++v<e;)d&&d[v].run();v=-1,e=p.length}d=null,m=!1,o(t)}}function u(t,e){this.fun=t,this.array=e}function c(){}var l,h,f=t.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(t){l=n}try{h="function"==typeof clearTimeout?clearTimeout:r}catch(t){h=r}}();var d,p=[],m=!1,v=-1;f.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];p.push(new u(t,e)),1!==p.length||m||i(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=c,f.addListener=c,f.once=c,f.off=c,f.removeListener=c,f.removeAllListeners=c,f.emit=c,f.prependListener=c,f.prependOnceListener=c,f.listeners=function(t){return[]},f.binding=function(t){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(t){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(t,e,n){(function(t){function n(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===n(t)},e.isBoolean=function(t){return"boolean"==typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return"number"==typeof t},e.isString=function(t){return"string"==typeof t},e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return"[object RegExp]"===n(t)},e.isObject=function(t){return"object"==typeof t&&null!==t},e.isDate=function(t){return"[object Date]"===n(t)},e.isError=function(t){return"[object Error]"===n(t)||t instanceof Error},e.isFunction=function(t){return"function"==typeof t},e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=t.isBuffer}).call(e,n(14).Buffer)},function(t,e,n){"use strict";(function(e){!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports=function(t,n,r,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,n)});case 3:return e.nextTick(function(){t.call(null,n,r)});case 4:return e.nextTick(function(){t.call(null,n,r,i)});default:for(o=new Array(s-1),a=0;a<o.length;)o[a++]=arguments[a];return e.nextTick(function(){t.apply(null,o)})}}:t.exports=e.nextTick}).call(e,n(6))},function(t,e,n){"use strict";function r(t){let e=[];for(let n=0;n<t.length;++n)Array.isArray(t[n])||t[n]instanceof Float32Array?e=e.concat(r(t[n])):e.push(t[n]);return e}function i(t,e){const n=[];for(let r=0;r<t.length;r+=e){const i=[];for(let n=0;n<e;n++)i.push(t[r+n]);n.push(i)}return n}function o(t,e){const n=i(e,3),o=i(t,3),s=[],u=a.c.create(),c=a.c.create(),l=a.c.create();let h,f,d;for(let t=0;t<n.length;t++){const e=n[t],r=e[0],i=e[1],p=e[2];h=o[r],f=o[i],d=o[p],a.c.subtract(u,d,f),a.c.subtract(c,h,f),a.c.cross(l,u,c),void 0===s[r]&&(s[r]=a.c.create()),void 0===s[i]&&(s[i]=a.c.create()),void 0===s[p]&&(s[p]=a.c.create()),a.c.add(s[r],s[r],l),a.c.add(s[i],s[i],l),a.c.add(s[p],s[p],l)}for(let t=0;t<s.length;t++)a.c.normalize(s[t],s[t]);return r(s,3)}e.a=r,e.d=i,e.c=function(t){const e=[];for(let n=0;n<t.length;++n)e[n]=.5;return e},e.b=o;var a=n(0)},function(t,e,n){"use strict";var r=n(0);class i{constructor(){this.quaternionAxisAngle=r.c.create(),this.position=r.c.create(),this.rotation=r.c.create(),this.scale=r.c.fromValues(1,1,1),this.quaternion=r.b.create(),this.modelMatrix=r.a.create()}update(){r.a.identity(this.modelMatrix),r.b.identity(this.quaternion),r.b.rotateX(this.quaternion,this.quaternion,this.rotation[0]),r.b.rotateY(this.quaternion,this.quaternion,this.rotation[1]),r.b.rotateZ(this.quaternion,this.quaternion,this.rotation[2]);const t=r.b.getAxisAngle(this.quaternionAxisAngle,this.quaternion);r.a.translate(this.modelMatrix,this.modelMatrix,this.position),r.a.rotate(this.modelMatrix,this.modelMatrix,t,this.quaternionAxisAngle),r.a.scale(this.modelMatrix,this.modelMatrix,this.scale)}}e.a=i},function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(t){return"function"==typeof t}function i(t){return"number"==typeof t}function o(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!i(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,i,s,u,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var l=new Error('Uncaught, unspecified "error" event. ('+e+")");throw l.context=e,l}if(n=this._events[t],a(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(o(n))for(s=Array.prototype.slice.call(arguments,1),i=(c=n.slice()).length,u=0;u<i;u++)c[u].apply(this,s);return!0},n.prototype.addListener=function(t,e){var i;if(!r(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,r(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned&&(i=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&i>0&&this._events[t].length>i&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function n(){this.removeListener(t,n),i||(i=!0,e.apply(this,arguments))}if(!r(e))throw TypeError("listener must be a function");var i=!1;return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var n,i,a,s;if(!r(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],a=n.length,i=-1,n===e||r(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(n)){for(s=a;s-- >0;)if(n[s]===e||n[s].listener&&n[s].listener===e){i=s;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],r(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){return this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(r(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,n){(e=t.exports=n(25)).Stream=e,e.Readable=e,e.Writable=n(15),e.Duplex=n(4),e.Transform=n(29),e.PassThrough=n(57)},function(t,e,n){function r(t,e){for(var n in t)e[n]=t[n]}function i(t,e,n){return a(t,e,n)}var o=n(14),a=o.Buffer;a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?t.exports=o:(r(o,e),e.Buffer=i),r(a,i),i.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return a(t,e,n)},i.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=a(t);return void 0!==e?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},i.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return a(t)},i.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return o.SlowBuffer(t)}},function(t,e,n){"use strict";(function(t){function r(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(t,e){if(r()<e)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=o.prototype:(null===t&&(t=new o(e)),t.length=e),t}function o(t,e,n){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return a(this,t,e,n)}function a(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?f(t,e,n,r):"string"==typeof e?l(t,e,n):d(t,e)}function s(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function u(t,e,n,r){return s(e),e<=0?i(t,e):void 0!==n?"string"==typeof r?i(t,e).fill(n,r):i(t,e).fill(n):i(t,e)}function c(t,e){if(s(e),t=i(t,e<0?0:0|p(e)),!o.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function l(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!o.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|m(e,n),a=(t=i(t,r)).write(e,n);return a!==r&&(t=t.slice(0,a)),t}function h(t,e){var n=e.length<0?0:0|p(e.length);t=i(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function f(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),o.TYPED_ARRAY_SUPPORT?(t=e).__proto__=o.prototype:t=h(t,e),t}function d(t,e){if(o.isBuffer(e)){var n=0|p(e.length);return 0===(t=i(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||G(e.length)?i(t,0):h(t,e);if("Buffer"===e.type&&$(e.data))return h(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function p(t){if(t>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|t}function m(t,e){if(o.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return z(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return X(t).length;default:if(r)return z(t).length;e=(""+e).toLowerCase(),r=!0}}function v(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,e>>>=0,n<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return k(this,e,n);case"utf8":case"utf-8":return L(this,e,n);case"ascii":return T(this,e,n);case"latin1":case"binary":return I(this,e,n);case"base64":return A(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function b(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function g(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=o.from(e,r)),o.isBuffer(e))return 0===e.length?-1:y(t,e,n,r,i);if("number"==typeof e)return e&=255,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):y(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function y(t,e,n,r,i){function o(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}var a=1,s=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,n/=2}var c;if(i){var l=-1;for(c=n;c<s;c++)if(o(t,c)===o(e,-1===l?0:c-l)){if(-1===l&&(l=c),c-l+1===u)return l*a}else-1!==l&&(c-=c-l),l=-1}else for(n+u>s&&(n=s-u),c=n;c>=0;c--){for(var h=!0,f=0;f<u;f++)if(o(t,c+f)!==o(e,f)){h=!1;break}if(h)return c}return-1}function w(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function M(t,e,n,r){return W(z(e,t.length-n),t,n,r)}function _(t,e,n,r){return W(V(e),t,n,r)}function x(t,e,n,r){return _(t,e,n,r)}function S(t,e,n,r){return W(X(e),t,n,r)}function E(t,e,n,r){return W(H(e,t.length-n),t,n,r)}function A(t,e,n){return 0===e&&n===t.length?K.fromByteArray(t):K.fromByteArray(t.slice(e,n))}function L(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o=t[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=n){var u,c,l,h;switch(s){case 1:o<128&&(a=o);break;case 2:128==(192&(u=t[i+1]))&&(h=(31&o)<<6|63&u)>127&&(a=h);break;case 3:u=t[i+1],c=t[i+2],128==(192&u)&&128==(192&c)&&(h=(15&o)<<12|(63&u)<<6|63&c)>2047&&(h<55296||h>57343)&&(a=h);break;case 4:u=t[i+1],c=t[i+2],l=t[i+3],128==(192&u)&&128==(192&c)&&128==(192&l)&&(h=(15&o)<<18|(63&u)<<12|(63&c)<<6|63&l)>65535&&h<1114112&&(a=h)}}null===a?(a=65533,s=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),i+=s}return R(r)}function R(t){var e=t.length;if(e<=Q)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=Q));return n}function T(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function I(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function k(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=Y(t[o]);return i}function O(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function P(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function B(t,e,n,r,i,a){if(!o.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<a)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function U(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function D(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function F(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function N(t,e,n,r,i){return i||F(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),Z.write(t,e,n,r,23,4),n+4}function j(t,e,n,r,i){return i||F(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),Z.write(t,e,n,r,52,8),n+8}function C(t){if((t=q(t).replace(J,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}function q(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Y(t){return t<16?"0"+t.toString(16):t.toString(16)}function z(t,e){e=e||1/0;for(var n,r=t.length,i=null,o=[],a=0;a<r;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function V(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}function H(t,e){for(var n,r,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)r=(n=t.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}function X(t){return K.toByteArray(C(t))}function W(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function G(t){return t!==t}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var K=n(50),Z=n(51),$=n(26);e.Buffer=o,e.SlowBuffer=function(t){return+t!=t&&(t=0),o.alloc(+t)},e.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=r(),o.poolSize=8192,o._augment=function(t){return t.__proto__=o.prototype,t},o.from=function(t,e,n){return a(null,t,e,n)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(t,e,n){return u(null,t,e,n)},o.allocUnsafe=function(t){return c(null,t)},o.allocUnsafeSlow=function(t){return c(null,t)},o.isBuffer=function(t){return!(null==t||!t._isBuffer)},o.compare=function(t,e){if(!o.isBuffer(t)||!o.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,a=Math.min(n,r);i<a;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},o.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(t,e){if(!$(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return o.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=o.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var a=t[n];if(!o.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},o.byteLength=m,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)b(this,e,e+1);return this},o.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)b(this,e,e+3),b(this,e+1,e+2);return this},o.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)b(this,e,e+7),b(this,e+1,e+6),b(this,e+2,e+5),b(this,e+3,e+4);return this},o.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?L(this,0,t):v.apply(this,arguments)},o.prototype.equals=function(t){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===o.compare(this,t)},o.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},o.prototype.compare=function(t,e,n,r,i){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,i>>>=0,this===t)return 0;for(var a=i-r,s=n-e,u=Math.min(a,s),c=this.slice(r,i),l=t.slice(e,n),h=0;h<u;++h)if(c[h]!==l[h]){a=c[h],s=l[h];break}return a<s?-1:s<a?1:0},o.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},o.prototype.indexOf=function(t,e,n){return g(this,t,e,n,!0)},o.prototype.lastIndexOf=function(t,e,n){return g(this,t,e,n,!1)},o.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return w(this,t,e,n);case"utf8":case"utf-8":return M(this,t,e,n);case"ascii":return _(this,t,e,n);case"latin1":case"binary":return x(this,t,e,n);case"base64":return S(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Q=4096;o.prototype.slice=function(t,e){var n=this.length;t=~~t,e=void 0===e?n:~~e,t<0?(t+=n)<0&&(t=0):t>n&&(t=n),e<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);var r;if(o.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=o.prototype;else{var i=e-t;r=new o(i,void 0);for(var a=0;a<i;++a)r[a]=this[a+t]}return r},o.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||P(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},o.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||P(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},o.prototype.readUInt8=function(t,e){return e||P(t,1,this.length),this[t]},o.prototype.readUInt16LE=function(t,e){return e||P(t,2,this.length),this[t]|this[t+1]<<8},o.prototype.readUInt16BE=function(t,e){return e||P(t,2,this.length),this[t]<<8|this[t+1]},o.prototype.readUInt32LE=function(t,e){return e||P(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},o.prototype.readUInt32BE=function(t,e){return e||P(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},o.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||P(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*e)),r},o.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||P(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},o.prototype.readInt8=function(t,e){return e||P(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},o.prototype.readInt16LE=function(t,e){e||P(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(t,e){e||P(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(t,e){return e||P(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},o.prototype.readInt32BE=function(t,e){return e||P(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},o.prototype.readFloatLE=function(t,e){return e||P(t,4,this.length),Z.read(this,t,!0,23,4)},o.prototype.readFloatBE=function(t,e){return e||P(t,4,this.length),Z.read(this,t,!1,23,4)},o.prototype.readDoubleLE=function(t,e){return e||P(t,8,this.length),Z.read(this,t,!0,52,8)},o.prototype.readDoubleBE=function(t,e){return e||P(t,8,this.length),Z.read(this,t,!1,52,8)},o.prototype.writeUIntLE=function(t,e,n,r){t=+t,e|=0,n|=0,r||B(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},o.prototype.writeUIntBE=function(t,e,n,r){t=+t,e|=0,n|=0,r||B(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},o.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||B(this,t,e,1,255,0),o.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},o.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||B(this,t,e,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):U(this,t,e,!0),e+2},o.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||B(this,t,e,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):U(this,t,e,!1),e+2},o.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||B(this,t,e,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):D(this,t,e,!0),e+4},o.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||B(this,t,e,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):D(this,t,e,!1),e+4},o.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);B(this,t,e,n,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},o.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);B(this,t,e,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},o.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||B(this,t,e,1,127,-128),o.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},o.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||B(this,t,e,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):U(this,t,e,!0),e+2},o.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||B(this,t,e,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):U(this,t,e,!1),e+2},o.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||B(this,t,e,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):D(this,t,e,!0),e+4},o.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||B(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):D(this,t,e,!1),e+4},o.prototype.writeFloatLE=function(t,e,n){return N(this,t,e,!0,n)},o.prototype.writeFloatBE=function(t,e,n){return N(this,t,e,!1,n)},o.prototype.writeDoubleLE=function(t,e,n){return j(this,t,e,!0,n)},o.prototype.writeDoubleBE=function(t,e,n){return j(this,t,e,!1,n)},o.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,a=r-n;if(this===t&&n<e&&e<r)for(i=a-1;i>=0;--i)t[i+e]=this[i+n];else if(a<1e3||!o.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+a),e);return a},o.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!o.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0);var a;if("number"==typeof t)for(a=e;a<n;++a)this[a]=t;else{var s=o.isBuffer(t)?t:z(new o(t,r).toString()),u=s.length;for(a=0;a<n-e;++a)this[a+e]=s[a%u]}return this};var J=/[^+\/0-9A-Za-z-_]/g}).call(e,n(3))},function(t,e,n){"use strict";(function(e,r,i){function o(t){var e=this;this.next=null,this.entry=null,this.finish=function(){L(e,t)}}function a(t){return B.from(t)}function s(t){return B.isBuffer(t)||t instanceof U}function u(){}function c(t,e){T=T||n(4),t=t||{},this.objectMode=!!t.objectMode,e instanceof T&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var r=t.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===t.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){g(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function l(t){if(T=T||n(4),!(F.call(l,this)||this instanceof T))return new l(t);this._writableState=new c(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),P.call(this)}function h(t,e){var n=new Error("write after end");t.emit("error",n),R(e,n)}function f(t,e,n,r){var i=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||e.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(t.emit("error",o),R(r,o),i=!1),i}function d(t,e,n){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=B.from(e,n)),e}function p(t,e,n,r,i,o){if(!n){var a=d(e,r,i);r!==a&&(n=!0,i="buffer",r=a)}var s=e.objectMode?1:r.length;e.length+=s;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else m(t,e,!1,s,r,i,o);return u}function m(t,e,n,r,i,o,a){e.writelen=r,e.writecb=a,e.writing=!0,e.sync=!0,n?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function v(t,e,n,r,i){--e.pendingcb,n?(R(i,r),R(E,t,e),t._writableState.errorEmitted=!0,t.emit("error",r)):(i(r),t._writableState.errorEmitted=!0,t.emit("error",r),E(t,e))}function b(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function g(t,e){var n=t._writableState,r=n.sync,i=n.writecb;if(b(n),e)v(t,n,r,e,i);else{var o=_(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||M(t,n),r?I(y,t,n,o,i):y(t,n,o,i)}}function y(t,e,n,r){n||w(t,e),e.pendingcb--,r(),E(t,e)}function w(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function M(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=e.bufferedRequestCount,i=new Array(r),a=e.corkedRequestsFree;a.entry=n;for(var s=0,u=!0;n;)i[s]=n,n.isBuf||(u=!1),n=n.next,s+=1;i.allBuffers=u,m(t,e,!0,e.length,i,"",a.finish),e.pendingcb++,e.lastBufferedRequest=null,a.next?(e.corkedRequestsFree=a.next,a.next=null):e.corkedRequestsFree=new o(e)}else{for(;n;){var c=n.chunk,l=n.encoding,h=n.callback;if(m(t,e,!1,e.objectMode?1:c.length,c,l,h),n=n.next,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequestCount=0,e.bufferedRequest=n,e.bufferProcessing=!1}function _(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function x(t,e){t._final(function(n){e.pendingcb--,n&&t.emit("error",n),e.prefinished=!0,t.emit("prefinish"),E(t,e)})}function S(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,R(x,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function E(t,e){var n=_(e);return n&&(S(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),n}function A(t,e,n){e.ending=!0,E(t,e),n&&(e.finished?R(n):t.once("finish",n)),e.ended=!0,t.writable=!1}function L(t,e,n){var r=t.entry;for(t.entry=null;r;){var i=r.callback;e.pendingcb--,i(n),r=r.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}var R=n(8);t.exports=l;var T,I=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?r:R;l.WritableState=c;var k=n(7);k.inherits=n(5);var O={deprecate:n(56)},P=n(27),B=n(13).Buffer,U=i.Uint8Array||function(){},D=n(28);k.inherits(l,P),c.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(c.prototype,"buffer",{get:O.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}();var F;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(F=Function.prototype[Symbol.hasInstance],Object.defineProperty(l,Symbol.hasInstance,{value:function(t){return!!F.call(this,t)||t&&t._writableState instanceof c}})):F=function(t){return t instanceof this},l.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},l.prototype.write=function(t,e,n){var r=this._writableState,i=!1,o=s(t)&&!r.objectMode;return o&&!B.isBuffer(t)&&(t=a(t)),"function"==typeof e&&(n=e,e=null),o?e="buffer":e||(e=r.defaultEncoding),"function"!=typeof n&&(n=u),r.ended?h(this,n):(o||f(this,r,t,n))&&(r.pendingcb++,i=p(this,r,o,t,e,n)),i},l.prototype.cork=function(){this._writableState.corked++},l.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||M(this,t))},l.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},l.prototype._write=function(t,e,n){n(new Error("_write() is not implemented"))},l.prototype._writev=null,l.prototype.end=function(t,e,n){var r=this._writableState;"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!==t&&void 0!==t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||A(this,r,n)},Object.defineProperty(l.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),l.prototype.destroy=D.destroy,l.prototype._undestroy=D.undestroy,l.prototype._destroy=function(t,e){this.end(),e(t)}}).call(e,n(6),n(54).setImmediate,n(3))},function(t,e,n){function r(t){if(t&&!u(t))throw new Error("Unknown encoding: "+t)}function i(t){return t.toString(this.encoding)}function o(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function a(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}var s=n(14).Buffer,u=s.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},c=e.StringDecoder=function(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),r(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=a;break;default:return void(this.write=i)}this.charBuffer=new s(6),this.charReceived=0,this.charLength=0};c.prototype.write=function(t){for(var e="";this.charLength;){var n=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";if(t=t.slice(n,t.length),!((i=(e=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(e.length-1))>=55296&&i<=56319)){if(this.charReceived=this.charLength=0,0===t.length)return e;break}this.charLength+=this.surrogateSize,e=""}this.detectIncompleteChar(t);r=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,r),r-=this.charReceived);var r=(e+=t.toString(this.encoding,0,r)).length-1,i=e.charCodeAt(r);if(i>=55296&&i<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),t.copy(this.charBuffer,0,0,o),e.substring(0,r)}return e},c.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var n=t[t.length-e];if(1==e&&n>>5==6){this.charLength=2;break}if(e<=2&&n>>4==14){this.charLength=3;break}if(e<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=e},c.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var n=this.charReceived,r=this.charBuffer,i=this.encoding;e+=r.slice(0,n).toString(i)}return e}},function(t,e,n){"use strict";class r{constructor(){this.objects=[],this.lights=[]}add(t){this.objects.push(t)}addLight(t){this.lights.push(t)}traverse(t){for(let t=0;t<this.lights.length;++t)this.lights[t].update();for(let t=0;t<this.objects.length;++t)this.objects[t].update()}}e.a=r},function(t,e,n){"use strict";e.a=function(){let t=new r.a(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t};var r=n(1)},function(t,e,n){"use strict";function r(){let t=new p.a(3);return t[0]=0,t[1]=0,t[2]=0,t}function i(t){let e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)}function o(t,e,n){let r=new p.a(3);return r[0]=t,r[1]=e,r[2]=n,r}function a(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function s(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function u(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function c(t,e){let n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(n*n+r*r+i*i)}function l(t,e){let n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return n*n+r*r+i*i}function h(t){let e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function f(t,e){let n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t}function d(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}Object.defineProperty(e,"__esModule",{value:!0}),e.create=r,e.clone=function(t){var e=new p.a(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},e.length=i,e.fromValues=o,e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},e.set=function(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},e.subtract=a,e.multiply=s,e.divide=u,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},e.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t},e.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},e.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},e.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t},e.distance=c,e.squaredDistance=l,e.squaredLength=h,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},e.normalize=f,e.dot=d,e.cross=function(t,e,n){let r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2];return t[0]=i*u-o*s,t[1]=o*a-r*u,t[2]=r*s-i*a,t},e.lerp=function(t,e,n,r){let i=e[0],o=e[1],a=e[2];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t},e.hermite=function(t,e,n,r,i,o){let a=o*o,s=a*(2*o-3)+1,u=a*(o-2)+o,c=a*(o-1),l=a*(3-2*o);return t[0]=e[0]*s+n[0]*u+r[0]*c+i[0]*l,t[1]=e[1]*s+n[1]*u+r[1]*c+i[1]*l,t[2]=e[2]*s+n[2]*u+r[2]*c+i[2]*l,t},e.bezier=function(t,e,n,r,i,o){let a=1-o,s=a*a,u=o*o,c=s*a,l=3*o*s,h=3*u*a,f=u*o;return t[0]=e[0]*c+n[0]*l+r[0]*h+i[0]*f,t[1]=e[1]*c+n[1]*l+r[1]*h+i[1]*f,t[2]=e[2]*c+n[2]*l+r[2]*h+i[2]*f,t},e.random=function(t,e){e=e||1;let n=2*p.c()*Math.PI,r=2*p.c()-1,i=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*i,t[1]=Math.sin(n)*i,t[2]=r*e,t},e.transformMat4=function(t,e,n){let r=e[0],i=e[1],o=e[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,t},e.transformMat3=function(t,e,n){let r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t},e.transformQuat=function(t,e,n){let r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2],c=n[3],l=c*r+s*o-u*i,h=c*i+u*r-a*o,f=c*o+a*i-s*r,d=-a*r-s*i-u*o;return t[0]=l*c+d*-a+h*-u-f*-s,t[1]=h*c+d*-s+f*-a-l*-u,t[2]=f*c+d*-u+l*-s-h*-a,t},e.rotateX=function(t,e,n,r){let i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},e.rotateY=function(t,e,n,r){let i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},e.rotateZ=function(t,e,n,r){let i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},e.angle=function(t,e){let n=o(t[0],t[1],t[2]),r=o(e[0],e[1],e[2]);f(n,n),f(r,r);let i=d(n,r);return i>1?0:i<-1?Math.PI:Math.acos(i)},e.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},e.equals=function(t,e){let n=t[0],r=t[1],i=t[2],o=e[0],a=e[1],s=e[2];return Math.abs(n-o)<=p.b*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-a)<=p.b*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-s)<=p.b*Math.max(1,Math.abs(i),Math.abs(s))};var p=n(1);const m=a;e.sub=m;const v=s;e.mul=v;const b=u;e.div=b;const g=c;e.dist=g;const y=l;e.sqrDist=y;const w=i;e.len=w;const M=h;e.sqrLen=M;const _=function(){let t=r();return function(e,n,r,i,o,a){let s,u;for(n||(n=3),r||(r=0),u=i?Math.min(i*n+r,e.length):e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],o(t,t,a),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2];return e}}();e.forEach=_},function(t,e,n){"use strict";function r(){let t=new d.a(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function i(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function o(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function a(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function s(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function u(t,e){let n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return Math.sqrt(n*n+r*r+i*i+o*o)}function c(t,e){let n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return n*n+r*r+i*i+o*o}function l(t){let e=t[0],n=t[1],r=t[2],i=t[3];return Math.sqrt(e*e+n*n+r*r+i*i)}function h(t){let e=t[0],n=t[1],r=t[2],i=t[3];return e*e+n*n+r*r+i*i}function f(t,e){let n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a),t[0]=n*a,t[1]=r*a,t[2]=i*a,t[3]=o*a),t}Object.defineProperty(e,"__esModule",{value:!0}),e.create=r,e.clone=function(t){let e=new d.a(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},e.fromValues=function(t,e,n,r){let i=new d.a(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},e.set=function(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},e.subtract=i,e.multiply=o,e.divide=a,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},e.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t},e.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},e.scale=s,e.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t},e.distance=u,e.squaredDistance=c,e.length=l,e.squaredLength=h,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},e.normalize=f,e.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},e.lerp=function(t,e,n,r){let i=e[0],o=e[1],a=e[2],s=e[3];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t[3]=s+r*(n[3]-s),t},e.random=function(t,e){return e=e||1,t[0]=d.c(),t[1]=d.c(),t[2]=d.c(),t[3]=d.c(),f(t,t),s(t,t,e),t},e.transformMat4=function(t,e,n){let r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t},e.transformQuat=function(t,e,n){let r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2],c=n[3],l=c*r+s*o-u*i,h=c*i+u*r-a*o,f=c*o+a*i-s*r,d=-a*r-s*i-u*o;return t[0]=l*c+d*-a+h*-u-f*-s,t[1]=h*c+d*-s+f*-a-l*-u,t[2]=f*c+d*-u+l*-s-h*-a,t[3]=e[3],t},e.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},e.equals=function(t,e){let n=t[0],r=t[1],i=t[2],o=t[3],a=e[0],s=e[1],u=e[2],c=e[3];return Math.abs(n-a)<=d.b*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-s)<=d.b*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-u)<=d.b*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(o-c)<=d.b*Math.max(1,Math.abs(o),Math.abs(c))};var d=n(1);const p=i;e.sub=p;const m=o;e.mul=m;const v=a;e.div=v;const b=u;e.dist=b;const g=c;e.sqrDist=g;const y=l;e.len=y;const w=h;e.sqrLen=w;const M=function(){let t=r();return function(e,n,r,i,o,a){let s,u;for(n||(n=4),r||(r=0),u=i?Math.min(i*n+r,e.length):e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],o(t,t,a),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}}();e.forEach=M},function(t,e,n){"use strict";var r=n(9);class i{constructor(t,e=0){const n=.5+Math.sqrt(5)/2;let i=[-1,+n,0,1,+n,0,-1,-n,0,1,-n,0,0,-1,+n,0,1,+n,0,-1,-n,0,1,-n,+n,0,-1,+n,0,1,-n,0,-1,-n,0,1];const o=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],a=[];let s={faces:Object(r.d)(o,3),positions:Object(r.d)(i,3)},u=Math.min(e,3);for(;u-- >0;)s=this.subdivide(s);for(let t=0;t<s.positions.length;t++){const e=this.normalize(s.positions[t]),n=.5*(-Math.atan2(e[2],-e[0])/Math.PI+1),r=.5+Math.asin(e[1])/Math.PI;a.push([1-n,1-r])}i=s.positions;for(let e=0;e<i.length;e++)this.scale(i[e],t);const c={positions:Object(r.a)(s.positions),indices:Object(r.a)(s.faces),normals:null,uvs:Object(r.a)(a,2)};return c.normals=Object(r.b)(c.positions,c.indices),c}fixPoleUVs(t,e,n){function r(e,r,i,o){const c=n[i],l=n[o];n[r][0]=(c[0]+l[0])/2,u++,a.push(t[r].slice()),s.push(n[r].slice()),e[0]=u}const i=this.firstYIndex(t,1),o=this.firstYIndex(t,-1);if(-1===i||-1===o)return;const a=t.slice(),s=n.slice();let u=a.length-1;for(let t=0;t<e.length;++t){const n=e[t],a=n[0],s=n[1],u=n[2];a===i?r(n,i,s,u):a===o&&r(n,o,s,u)}t=a,n=s}firstYIndex(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(Math.abs(r[1]-e)<=1e-4)return n}return-1}normalize(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n]*t[n];if(0===(e=Math.sqrt(e)))return Array.apply(null,new Array(t.length)).map(Number.prototype.valueOf,0);for(let n=0;n<t.length;n++)t[n]/=e;return t}scale(t,e){for(let n=0;n<t.length;n++)t[n]*=e;return t}subdivide(t){function e(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2,(t[2]+e[2])/2]}function n(t){return`${t[0].toPrecision(6)},${t[1].toPrecision(6)},${t[2].toPrecision(6)}`}function r(t,r){const i=e(t,r),o=n(i),a=u[o];return a||(u[o]=i,u[o])}const{positions:i,faces:o}=t,a=[],s=[],u={};let c=0;for(let t=0;t<o.length;t++){const e=o[t],n=e[0],u=e[1],l=e[2],h=i[n],f=i[u],d=i[l],p=r(h,f),m=r(f,d),v=r(d,h);let b=s.indexOf(p);-1===b&&(b=c++,s.push(p));let g=s.indexOf(m);-1===g&&(g=c++,s.push(m));let y=s.indexOf(v);-1===y&&(y=c++,s.push(v));let w=s.indexOf(h);-1===w&&(w=c++,s.push(h));let M=s.indexOf(f);-1===M&&(M=c++,s.push(f));let _=s.indexOf(d);-1===_&&(_=c++,s.push(d)),a.push([w,b,y]),a.push([M,g,b]),a.push([_,y,g]),a.push([b,g,y])}return{faces:a,positions:s}}}e.a=i},function(t,e,n){"use strict";var r=n(10);class i extends r.a{constructor(t,e){super(),this._geometry=t,this._material=e,this._buffers=void 0,this.indexCount=t.indices.length}get material(){return this._material}get buffers(){return this._buffers}get geometry(){return this._geometry}set buffers(t){this._buffers=t}set material(t){this._material=t}}e.a=i},function(t,e,n){"use strict";function r(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)?r:(alert("An error occurred compiling the shaders: "+t.getShaderInfoLog(r)),t.deleteShader(r),null)}e.a=((t,e,n)=>{const i=r(t,t.VERTEX_SHADER,e),o=r(t,t.FRAGMENT_SHADER,n),a=t.createProgram();if(t.attachShader(a,i),t.attachShader(a,o),t.linkProgram(a),t.getProgramParameter(a,t.LINK_STATUS))return a;alert("Unable to initialize the shader program: "+t.getProgramInfoLog(a))})},function(t,e,n){function r(){i.call(this)}t.exports=r;var i=n(11).EventEmitter;n(5)(r,i),r.Readable=n(12),r.Writable=n(58),r.Duplex=n(59),r.Transform=n(60),r.PassThrough=n(61),r.Stream=r,r.prototype.pipe=function(t,e){function n(e){t.writable&&!1===t.write(e)&&c.pause&&c.pause()}function r(){c.readable&&c.resume&&c.resume()}function o(){l||(l=!0,t.end())}function a(){l||(l=!0,"function"==typeof t.destroy&&t.destroy())}function s(t){if(u(),0===i.listenerCount(this,"error"))throw t}function u(){c.removeListener("data",n),t.removeListener("drain",r),c.removeListener("end",o),c.removeListener("close",a),c.removeListener("error",s),t.removeListener("error",s),c.removeListener("end",u),c.removeListener("close",u),t.removeListener("close",u)}var c=this;c.on("data",n),t.on("drain",r),t._isStdio||e&&!1===e.end||(c.on("end",o),c.on("close",a));var l=!1;return c.on("error",s),t.on("error",s),c.on("end",u),c.on("close",u),t.on("close",u),t.emit("pipe",c),t}},function(t,e,n){"use strict";(function(e,r){function i(t){return F.from(t)}function o(t){return F.isBuffer(t)||t instanceof N}function a(t,e,n){if("function"==typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?B(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}function s(t,e){P=P||n(4),t=t||{},this.objectMode=!!t.objectMode,e instanceof P&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var r=t.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new z,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(Y||(Y=n(16).StringDecoder),this.decoder=new Y(t.encoding),this.encoding=t.encoding)}function u(t){if(P=P||n(4),!(this instanceof u))return new u(t);this._readableState=new s(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),D.call(this)}function c(t,e,n,r,o){var a=t._readableState;if(null===e)a.reading=!1,m(t,a);else{var s;o||(s=h(a,e)),s?t.emit("error",s):a.objectMode||e&&e.length>0?("string"==typeof e||a.objectMode||Object.getPrototypeOf(e)===F.prototype||(e=i(e)),r?a.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):l(t,a,e,!0):a.ended?t.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!n?(e=a.decoder.write(e),a.objectMode||0!==e.length?l(t,a,e,!1):g(t,a)):l(t,a,e,!1))):r||(a.reading=!1)}return f(a)}function l(t,e,n,r){e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&v(t)),g(t,e)}function h(t,e){var n;return o(e)||"string"==typeof e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function f(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}function d(t){return t>=X?t=X:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function p(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=d(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function m(t,e){if(!e.ended){if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,v(t)}}function v(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(q("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?O(b,t):b(t))}function b(t){q("emit readable"),t.emit("readable"),S(t)}function g(t,e){e.readingMore||(e.readingMore=!0,O(y,t,e))}function y(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(q("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function w(t){return function(){var e=t._readableState;q("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&U(t,"data")&&(e.flowing=!0,S(t))}}function M(t){q("readable nexttick read 0"),t.read(0)}function _(t,e){e.resumeScheduled||(e.resumeScheduled=!0,O(x,t,e))}function x(t,e){e.reading||(q("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),S(t),e.flowing&&!e.reading&&t.read(0)}function S(t){var e=t._readableState;for(q("flow",e.flowing);e.flowing&&null!==t.read(););}function E(t,e){if(0===e.length)return null;var n;return e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):n=A(t,e.buffer,e.decoder),n}function A(t,e,n){var r;return t<e.head.data.length?(r=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):r=t===e.head.data.length?e.shift():n?L(t,e):R(t,e),r}function L(t,e){var n=e.head,r=1,i=n.data;for(t-=i.length;n=n.next;){var o=n.data,a=t>o.length?o.length:t;if(a===o.length?i+=o:i+=o.slice(0,t),0===(t-=a)){a===o.length?(++r,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(a));break}++r}return e.length-=r,i}function R(t,e){var n=F.allocUnsafe(t),r=e.head,i=1;for(r.data.copy(n),t-=r.data.length;r=r.next;){var o=r.data,a=t>o.length?o.length:t;if(o.copy(n,n.length-t,0,a),0===(t-=a)){a===o.length?(++i,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=o.slice(a));break}++i}return e.length-=i,n}function T(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,O(I,e,t))}function I(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function k(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}var O=n(8);t.exports=u;var P,B=n(26);u.ReadableState=s;n(11).EventEmitter;var U=function(t,e){return t.listeners(e).length},D=n(27),F=n(13).Buffer,N=e.Uint8Array||function(){},j=n(7);j.inherits=n(5);var C=n(52),q=void 0;q=C&&C.debuglog?C.debuglog("stream"):function(){};var Y,z=n(53),V=n(28);j.inherits(u,D);var H=["error","close","destroy","pause","resume"];Object.defineProperty(u.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),u.prototype.destroy=V.destroy,u.prototype._undestroy=V.undestroy,u.prototype._destroy=function(t,e){this.push(null),e(t)},u.prototype.push=function(t,e){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=F.from(t,e),e=""),n=!0),c(this,t,e,!1,n)},u.prototype.unshift=function(t){return c(this,t,null,!0,!1)},u.prototype.isPaused=function(){return!1===this._readableState.flowing},u.prototype.setEncoding=function(t){return Y||(Y=n(16).StringDecoder),this._readableState.decoder=new Y(t),this._readableState.encoding=t,this};var X=8388608;u.prototype.read=function(t){q("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return q("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?T(this):v(this),null;if(0===(t=p(t,e))&&e.ended)return 0===e.length&&T(this),null;var r=e.needReadable;q("need readable",r),(0===e.length||e.length-t<e.highWaterMark)&&q("length less than watermark",r=!0),e.ended||e.reading?q("reading or ended",r=!1):r&&(q("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=p(n,e)));var i;return null===(i=t>0?E(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&T(this)),null!==i&&this.emit("data",i),i},u.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},u.prototype.pipe=function(t,e){function n(t,e){q("onunpipe"),t===f&&e&&!1===e.hasUnpiped&&(e.hasUnpiped=!0,o())}function i(){q("onend"),t.end()}function o(){q("cleanup"),t.removeListener("close",c),t.removeListener("finish",l),t.removeListener("drain",m),t.removeListener("error",u),t.removeListener("unpipe",n),f.removeListener("end",i),f.removeListener("end",h),f.removeListener("data",s),v=!0,!d.awaitDrain||t._writableState&&!t._writableState.needDrain||m()}function s(e){q("ondata"),b=!1,!1!==t.write(e)||b||((1===d.pipesCount&&d.pipes===t||d.pipesCount>1&&-1!==k(d.pipes,t))&&!v&&(q("false write response, pause",f._readableState.awaitDrain),f._readableState.awaitDrain++,b=!0),f.pause())}function u(e){q("onerror",e),h(),t.removeListener("error",u),0===U(t,"error")&&t.emit("error",e)}function c(){t.removeListener("finish",l),h()}function l(){q("onfinish"),t.removeListener("close",c),h()}function h(){q("unpipe"),f.unpipe(t)}var f=this,d=this._readableState;switch(d.pipesCount){case 0:d.pipes=t;break;case 1:d.pipes=[d.pipes,t];break;default:d.pipes.push(t)}d.pipesCount+=1,q("pipe count=%d opts=%j",d.pipesCount,e);var p=(!e||!1!==e.end)&&t!==r.stdout&&t!==r.stderr?i:h;d.endEmitted?O(p):f.once("end",p),t.on("unpipe",n);var m=w(f);t.on("drain",m);var v=!1,b=!1;return f.on("data",s),a(t,"error",u),t.once("close",c),t.once("finish",l),t.emit("pipe",f),d.flowing||(q("pipe resume"),f.resume()),t},u.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n),this);if(!t){var r=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,n);return this}var a=k(e.pipes,t);return-1===a?this:(e.pipes.splice(a,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n),this)},u.prototype.on=function(t,e){var n=D.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&v(this):O(M,this))}return n},u.prototype.addListener=u.prototype.on,u.prototype.resume=function(){var t=this._readableState;return t.flowing||(q("resume"),t.flowing=!0,_(this,t)),this},u.prototype.pause=function(){return q("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(q("pause"),this._readableState.flowing=!1,this.emit("pause")),this},u.prototype.wrap=function(t){var e=this._readableState,n=!1,r=this;t.on("end",function(){if(q("wrapped end"),e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&r.push(t)}r.push(null)}),t.on("data",function(i){q("wrapped data"),e.decoder&&(i=e.decoder.write(i)),(!e.objectMode||null!==i&&void 0!==i)&&(e.objectMode||i&&i.length)&&(r.push(i)||(n=!0,t.pause()))});for(var i in t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var o=0;o<H.length;o++)t.on(H[o],r.emit.bind(r,H[o]));return r._read=function(e){q("wrapped _read",e),n&&(n=!1,t.resume())},r},u._fromList=E}).call(e,n(3),n(6))},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){t.exports=n(11).EventEmitter},function(t,e,n){"use strict";function r(t,e){t.emit("error",e)}var i=n(8);t.exports={destroy:function(t,e){var n=this,o=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;o||a?e?e(t):!t||this._writableState&&this._writableState.errorEmitted||i(r,this,t):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?(i(r,n,t),n._writableState&&(n._writableState.errorEmitted=!0)):e&&e(t)}))},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(t,e,n){"use strict";function r(t){this.afterTransform=function(e,n){return i(t,e,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function i(t,e,n){var r=t._transformState;r.transforming=!1;var i=r.writecb;if(!i)return t.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!==n&&void 0!==n&&t.push(n),i(e);var o=t._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&t._read(o.highWaterMark)}function o(t){if(!(this instanceof o))return new o(t);s.call(this,t),this._transformState=new r(this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(t,n){a(e,t,n)}):a(e)})}function a(t,e,n){if(e)return t.emit("error",e);null!==n&&void 0!==n&&t.push(n);var r=t._writableState,i=t._transformState;if(r.length)throw new Error("Calling transform done when ws.length != 0");if(i.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}t.exports=o;var s=n(4),u=n(7);u.inherits=n(5),u.inherits(o,s),o.prototype.push=function(t,e){return this._transformState.needTransform=!1,s.prototype.push.call(this,t,e)},o.prototype._transform=function(t,e,n){throw new Error("_transform() is not implemented")},o.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},o.prototype._destroy=function(t,e){var n=this;s.prototype._destroy.call(this,t,function(t){e(t),n.emit("close")})}},function(t,e){t.exports=function(t){var e=n.call(t);return"[object Function]"===e||"function"==typeof t&&"[object RegExp]"!==e||"undefined"!=typeof window&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)};var n=Object.prototype.toString},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"BasicMaterial",function(){return BasicMaterial});var r=n(2),i=n(38),o=n(21),a=n(17),s=n(22),u=n(39),c=n(40),l=n(42),h=n(43),f=n(44),d=n(45),p=n(46),m=n(48),v=n(70);n.d(e,"PhongMaterial",function(){return c.a}),n.d(e,"LambertMaterial",function(){return l.a}),n.d(e,"ObjectLoader",function(){return p.a}),n.d(e,"Renderer",function(){return r.a}),n.d(e,"Cube",function(){return i.a}),n.d(e,"Sphere",function(){return o.a}),n.d(e,"Mesh",function(){return s.a}),n.d(e,"Scene",function(){return a.a}),n.d(e,"MaterialLoader",function(){return m.a}),n.d(e,"PerspectiveCamera",function(){return u.a}),n.d(e,"OrbitControls",function(){return h.a}),n.d(e,"FlyControls",function(){return f.a}),n.d(e,"DirectionalLight",function(){return d.a}),n.d(e,"ResourceLoader",function(){return v.a})},function(t,e,n){"use strict";n(1)},function(t,e,n){"use strict";n(1)},function(t,e,n){"use strict";function r(t,e,n){let r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],h=e[8],f=e[9],d=e[10],p=e[11],m=e[12],v=e[13],b=e[14],g=e[15],y=n[0],w=n[1],M=n[2],_=n[3];return t[0]=y*r+w*s+M*h+_*m,t[1]=y*i+w*u+M*f+_*v,t[2]=y*o+w*c+M*d+_*b,t[3]=y*a+w*l+M*p+_*g,y=n[4],w=n[5],M=n[6],_=n[7],t[4]=y*r+w*s+M*h+_*m,t[5]=y*i+w*u+M*f+_*v,t[6]=y*o+w*c+M*d+_*b,t[7]=y*a+w*l+M*p+_*g,y=n[8],w=n[9],M=n[10],_=n[11],t[8]=y*r+w*s+M*h+_*m,t[9]=y*i+w*u+M*f+_*v,t[10]=y*o+w*c+M*d+_*b,t[11]=y*a+w*l+M*p+_*g,y=n[12],w=n[13],M=n[14],_=n[15],t[12]=y*r+w*s+M*h+_*m,t[13]=y*i+w*u+M*f+_*v,t[14]=y*o+w*c+M*d+_*b,t[15]=y*a+w*l+M*p+_*g,t}function i(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(){let t=new o.a(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.clone=function(t){let e=new o.a(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.fromValues=function(t,e,n,r,i,a,s,u,c,l,h,f,d,p,m,v){let b=new o.a(16);return b[0]=t,b[1]=e,b[2]=n,b[3]=r,b[4]=i,b[5]=a,b[6]=s,b[7]=u,b[8]=c,b[9]=l,b[10]=h,b[11]=f,b[12]=d,b[13]=p,b[14]=m,b[15]=v,b},e.set=function(t,e,n,r,i,o,a,s,u,c,l,h,f,d,p,m,v){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=u,t[8]=c,t[9]=l,t[10]=h,t[11]=f,t[12]=d,t[13]=p,t[14]=m,t[15]=v,t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.transpose=function(t,e){if(t===e){let n=e[1],r=e[2],i=e[3],o=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=i,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},e.invert=function(t,e){let n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],h=e[9],f=e[10],d=e[11],p=e[12],m=e[13],v=e[14],b=e[15],g=n*s-r*a,y=n*u-i*a,w=n*c-o*a,M=r*u-i*s,_=r*c-o*s,x=i*c-o*u,S=l*m-h*p,E=l*v-f*p,A=l*b-d*p,L=h*v-f*m,R=h*b-d*m,T=f*b-d*v,I=g*T-y*R+w*L+M*A-_*E+x*S;return I?(I=1/I,t[0]=(s*T-u*R+c*L)*I,t[1]=(i*R-r*T-o*L)*I,t[2]=(m*x-v*_+b*M)*I,t[3]=(f*_-h*x-d*M)*I,t[4]=(u*A-a*T-c*E)*I,t[5]=(n*T-i*A+o*E)*I,t[6]=(v*w-p*x-b*y)*I,t[7]=(l*x-f*w+d*y)*I,t[8]=(a*R-s*A+c*S)*I,t[9]=(r*A-n*R-o*S)*I,t[10]=(p*_-m*w+b*g)*I,t[11]=(h*w-l*_-d*g)*I,t[12]=(s*E-a*L-u*S)*I,t[13]=(n*L-r*E+i*S)*I,t[14]=(m*y-p*M-v*g)*I,t[15]=(l*M-h*y+f*g)*I,t):null},e.adjoint=function(t,e){let n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],h=e[9],f=e[10],d=e[11],p=e[12],m=e[13],v=e[14],b=e[15];return t[0]=s*(f*b-d*v)-h*(u*b-c*v)+m*(u*d-c*f),t[1]=-(r*(f*b-d*v)-h*(i*b-o*v)+m*(i*d-o*f)),t[2]=r*(u*b-c*v)-s*(i*b-o*v)+m*(i*c-o*u),t[3]=-(r*(u*d-c*f)-s*(i*d-o*f)+h*(i*c-o*u)),t[4]=-(a*(f*b-d*v)-l*(u*b-c*v)+p*(u*d-c*f)),t[5]=n*(f*b-d*v)-l*(i*b-o*v)+p*(i*d-o*f),t[6]=-(n*(u*b-c*v)-a*(i*b-o*v)+p*(i*c-o*u)),t[7]=n*(u*d-c*f)-a*(i*d-o*f)+l*(i*c-o*u),t[8]=a*(h*b-d*m)-l*(s*b-c*m)+p*(s*d-c*h),t[9]=-(n*(h*b-d*m)-l*(r*b-o*m)+p*(r*d-o*h)),t[10]=n*(s*b-c*m)-a*(r*b-o*m)+p*(r*c-o*s),t[11]=-(n*(s*d-c*h)-a*(r*d-o*h)+l*(r*c-o*s)),t[12]=-(a*(h*v-f*m)-l*(s*v-u*m)+p*(s*f-u*h)),t[13]=n*(h*v-f*m)-l*(r*v-i*m)+p*(r*f-i*h),t[14]=-(n*(s*v-u*m)-a*(r*v-i*m)+p*(r*u-i*s)),t[15]=n*(s*f-u*h)-a*(r*f-i*h)+l*(r*u-i*s),t},e.determinant=function(t){let e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8],l=t[9],h=t[10],f=t[11],d=t[12],p=t[13],m=t[14],v=t[15];return(e*a-n*o)*(h*v-f*m)-(e*s-r*o)*(l*v-f*p)+(e*u-i*o)*(l*m-h*p)+(n*s-r*a)*(c*v-f*d)-(n*u-i*a)*(c*m-h*d)+(r*u-i*s)*(c*p-l*d)},e.multiply=r,e.translate=function(t,e,n){let r,i,o,a,s,u,c,l,h,f,d,p,m=n[0],v=n[1],b=n[2];return e===t?(t[12]=e[0]*m+e[4]*v+e[8]*b+e[12],t[13]=e[1]*m+e[5]*v+e[9]*b+e[13],t[14]=e[2]*m+e[6]*v+e[10]*b+e[14],t[15]=e[3]*m+e[7]*v+e[11]*b+e[15]):(r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],h=e[8],f=e[9],d=e[10],p=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=c,t[7]=l,t[8]=h,t[9]=f,t[10]=d,t[11]=p,t[12]=r*m+s*v+h*b+e[12],t[13]=i*m+u*v+f*b+e[13],t[14]=o*m+c*v+d*b+e[14],t[15]=a*m+l*v+p*b+e[15]),t},e.scale=function(t,e,n){let r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.rotate=function(t,e,n,r){let i,a,s,u,c,l,h,f,d,p,m,v,b,g,y,w,M,_,x,S,E,A,L,R,T=r[0],I=r[1],k=r[2],O=Math.sqrt(T*T+I*I+k*k);return Math.abs(O)<o.b?null:(O=1/O,T*=O,I*=O,k*=O,i=Math.sin(n),a=Math.cos(n),s=1-a,u=e[0],c=e[1],l=e[2],h=e[3],f=e[4],d=e[5],p=e[6],m=e[7],v=e[8],b=e[9],g=e[10],y=e[11],w=T*T*s+a,M=I*T*s+k*i,_=k*T*s-I*i,x=T*I*s-k*i,S=I*I*s+a,E=k*I*s+T*i,A=T*k*s+I*i,L=I*k*s-T*i,R=k*k*s+a,t[0]=u*w+f*M+v*_,t[1]=c*w+d*M+b*_,t[2]=l*w+p*M+g*_,t[3]=h*w+m*M+y*_,t[4]=u*x+f*S+v*E,t[5]=c*x+d*S+b*E,t[6]=l*x+p*S+g*E,t[7]=h*x+m*S+y*E,t[8]=u*A+f*L+v*R,t[9]=c*A+d*L+b*R,t[10]=l*A+p*L+g*R,t[11]=h*A+m*L+y*R,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},e.rotateX=function(t,e,n){let r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],s=e[6],u=e[7],c=e[8],l=e[9],h=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+c*r,t[5]=a*i+l*r,t[6]=s*i+h*r,t[7]=u*i+f*r,t[8]=c*i-o*r,t[9]=l*i-a*r,t[10]=h*i-s*r,t[11]=f*i-u*r,t},e.rotateY=function(t,e,n){let r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],c=e[8],l=e[9],h=e[10],f=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-c*r,t[1]=a*i-l*r,t[2]=s*i-h*r,t[3]=u*i-f*r,t[8]=o*r+c*i,t[9]=a*r+l*i,t[10]=s*r+h*i,t[11]=u*r+f*i,t},e.rotateZ=function(t,e,n){let r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],c=e[4],l=e[5],h=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+c*r,t[1]=a*i+l*r,t[2]=s*i+h*r,t[3]=u*i+f*r,t[4]=c*i-o*r,t[5]=l*i-a*r,t[6]=h*i-s*r,t[7]=f*i-u*r,t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromRotation=function(t,e,n){let r,i,a,s=n[0],u=n[1],c=n[2],l=Math.sqrt(s*s+u*u+c*c);return Math.abs(l)<o.b?null:(l=1/l,s*=l,u*=l,c*=l,r=Math.sin(e),i=Math.cos(e),a=1-i,t[0]=s*s*a+i,t[1]=u*s*a+c*r,t[2]=c*s*a-u*r,t[3]=0,t[4]=s*u*a-c*r,t[5]=u*u*a+i,t[6]=c*u*a+s*r,t[7]=0,t[8]=s*c*a+u*r,t[9]=u*c*a-s*r,t[10]=c*c*a+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},e.fromXRotation=function(t,e){let n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromYRotation=function(t,e){let n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromZRotation=function(t,e){let n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromRotationTranslation=function(t,e,n){let r=e[0],i=e[1],o=e[2],a=e[3],s=r+r,u=i+i,c=o+o,l=r*s,h=r*u,f=r*c,d=i*u,p=i*c,m=o*c,v=a*s,b=a*u,g=a*c;return t[0]=1-(d+m),t[1]=h+g,t[2]=f-b,t[3]=0,t[4]=h-g,t[5]=1-(l+m),t[6]=p+v,t[7]=0,t[8]=f+b,t[9]=p-v,t[10]=1-(l+d),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},e.getTranslation=function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},e.getScaling=function(t,e){let n=e[0],r=e[1],i=e[2],o=e[4],a=e[5],s=e[6],u=e[8],c=e[9],l=e[10];return t[0]=Math.sqrt(n*n+r*r+i*i),t[1]=Math.sqrt(o*o+a*a+s*s),t[2]=Math.sqrt(u*u+c*c+l*l),t},e.getRotation=function(t,e){let n=e[0]+e[5]+e[10],r=0;return n>0?(r=2*Math.sqrt(n+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r),t},e.fromRotationTranslationScale=function(t,e,n,r){let i=e[0],o=e[1],a=e[2],s=e[3],u=i+i,c=o+o,l=a+a,h=i*u,f=i*c,d=i*l,p=o*c,m=o*l,v=a*l,b=s*u,g=s*c,y=s*l,w=r[0],M=r[1],_=r[2];return t[0]=(1-(p+v))*w,t[1]=(f+y)*w,t[2]=(d-g)*w,t[3]=0,t[4]=(f-y)*M,t[5]=(1-(h+v))*M,t[6]=(m+b)*M,t[7]=0,t[8]=(d+g)*_,t[9]=(m-b)*_,t[10]=(1-(h+p))*_,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},e.fromRotationTranslationScaleOrigin=function(t,e,n,r,i){let o=e[0],a=e[1],s=e[2],u=e[3],c=o+o,l=a+a,h=s+s,f=o*c,d=o*l,p=o*h,m=a*l,v=a*h,b=s*h,g=u*c,y=u*l,w=u*h,M=r[0],_=r[1],x=r[2],S=i[0],E=i[1],A=i[2];return t[0]=(1-(m+b))*M,t[1]=(d+w)*M,t[2]=(p-y)*M,t[3]=0,t[4]=(d-w)*_,t[5]=(1-(f+b))*_,t[6]=(v+g)*_,t[7]=0,t[8]=(p+y)*x,t[9]=(v-g)*x,t[10]=(1-(f+m))*x,t[11]=0,t[12]=n[0]+S-(t[0]*S+t[4]*E+t[8]*A),t[13]=n[1]+E-(t[1]*S+t[5]*E+t[9]*A),t[14]=n[2]+A-(t[2]*S+t[6]*E+t[10]*A),t[15]=1,t},e.fromQuat=function(t,e){let n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,u=i+i,c=n*a,l=r*a,h=r*s,f=i*a,d=i*s,p=i*u,m=o*a,v=o*s,b=o*u;return t[0]=1-h-p,t[1]=l+b,t[2]=f-v,t[3]=0,t[4]=l-b,t[5]=1-c-p,t[6]=d+m,t[7]=0,t[8]=f+v,t[9]=d-m,t[10]=1-c-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.frustum=function(t,e,n,r,i,o,a){let s=1/(n-e),u=1/(i-r),c=1/(o-a);return t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(i+r)*u,t[10]=(a+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*c,t[15]=0,t},e.perspective=function(t,e,n,r,i){let o=1/Math.tan(e/2),a=1/(r-i);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+r)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*r*a,t[15]=0,t},e.perspectiveFromFieldOfView=function(t,e,n,r){let i=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),u=2/(a+s),c=2/(i+o);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(a-s)*u*.5,t[9]=(i-o)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t},e.ortho=function(t,e,n,r,i,o,a){let s=1/(e-n),u=1/(r-i),c=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=(a+o)*c,t[15]=1,t},e.lookAt=function(t,e,n,r){let i,a,s,u,c,l,h,f,d,p,m=e[0],v=e[1],b=e[2],g=r[0],y=r[1],w=r[2],M=n[0],_=n[1],x=n[2];return Math.abs(m-M)<o.b&&Math.abs(v-_)<o.b&&Math.abs(b-x)<o.b?mat4.identity(t):(h=m-M,f=v-_,d=b-x,p=1/Math.sqrt(h*h+f*f+d*d),h*=p,f*=p,d*=p,i=y*d-w*f,a=w*h-g*d,s=g*f-y*h,(p=Math.sqrt(i*i+a*a+s*s))?(i*=p=1/p,a*=p,s*=p):(i=0,a=0,s=0),u=f*s-d*a,c=d*i-h*s,l=h*a-f*i,(p=Math.sqrt(u*u+c*c+l*l))?(u*=p=1/p,c*=p,l*=p):(u=0,c=0,l=0),t[0]=i,t[1]=u,t[2]=h,t[3]=0,t[4]=a,t[5]=c,t[6]=f,t[7]=0,t[8]=s,t[9]=l,t[10]=d,t[11]=0,t[12]=-(i*m+a*v+s*b),t[13]=-(u*m+c*v+l*b),t[14]=-(h*m+f*v+d*b),t[15]=1,t)},e.targetTo=function(t,e,n,r){let i=e[0],o=e[1],a=e[2],s=r[0],u=r[1],c=r[2],l=i-n[0],h=o-n[1],f=a-n[2],d=l*l+h*h+f*f;d>0&&(l*=d=1/Math.sqrt(d),h*=d,f*=d);let p=u*f-c*h,m=c*l-s*f,v=s*h-u*l;return t[0]=p,t[1]=m,t[2]=v,t[3]=0,t[4]=h*v-f*m,t[5]=f*p-l*v,t[6]=l*m-h*p,t[7]=0,t[8]=l,t[9]=h,t[10]=f,t[11]=0,t[12]=i,t[13]=o,t[14]=a,t[15]=1,t},e.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t},e.subtract=i,e.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},e.equals=function(t,e){let n=t[0],r=t[1],i=t[2],a=t[3],s=t[4],u=t[5],c=t[6],l=t[7],h=t[8],f=t[9],d=t[10],p=t[11],m=t[12],v=t[13],b=t[14],g=t[15],y=e[0],w=e[1],M=e[2],_=e[3],x=e[4],S=e[5],E=e[6],A=e[7],L=e[8],R=e[9],T=e[10],I=e[11],k=e[12],O=e[13],P=e[14],B=e[15];return Math.abs(n-y)<=o.b*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(r-w)<=o.b*Math.max(1,Math.abs(r),Math.abs(w))&&Math.abs(i-M)<=o.b*Math.max(1,Math.abs(i),Math.abs(M))&&Math.abs(a-_)<=o.b*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(s-x)<=o.b*Math.max(1,Math.abs(s),Math.abs(x))&&Math.abs(u-S)<=o.b*Math.max(1,Math.abs(u),Math.abs(S))&&Math.abs(c-E)<=o.b*Math.max(1,Math.abs(c),Math.abs(E))&&Math.abs(l-A)<=o.b*Math.max(1,Math.abs(l),Math.abs(A))&&Math.abs(h-L)<=o.b*Math.max(1,Math.abs(h),Math.abs(L))&&Math.abs(f-R)<=o.b*Math.max(1,Math.abs(f),Math.abs(R))&&Math.abs(d-T)<=o.b*Math.max(1,Math.abs(d),Math.abs(T))&&Math.abs(p-I)<=o.b*Math.max(1,Math.abs(p),Math.abs(I))&&Math.abs(m-k)<=o.b*Math.max(1,Math.abs(m),Math.abs(k))&&Math.abs(v-O)<=o.b*Math.max(1,Math.abs(v),Math.abs(O))&&Math.abs(b-P)<=o.b*Math.max(1,Math.abs(b),Math.abs(P))&&Math.abs(g-B)<=o.b*Math.max(1,Math.abs(g),Math.abs(B))};var o=n(1);const a=r;e.mul=a;const s=i;e.sub=s},function(t,e,n){"use strict";function r(){let t=new u.a(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function i(t,e,n){n*=.5;let r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function o(t,e,n){let r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1],c=n[2],l=n[3];return t[0]=r*l+a*s+i*c-o*u,t[1]=i*l+a*u+o*s-r*c,t[2]=o*l+a*c+r*u-i*s,t[3]=a*l-r*s-i*u-o*c,t}function a(t,e,n,r){let i,o,a,s,u,c=e[0],l=e[1],h=e[2],f=e[3],d=n[0],p=n[1],m=n[2],v=n[3];return(o=c*d+l*p+h*m+f*v)<0&&(o=-o,d=-d,p=-p,m=-m,v=-v),1-o>1e-6?(i=Math.acos(o),a=Math.sin(i),s=Math.sin((1-r)*i)/a,u=Math.sin(r*i)/a):(s=1-r,u=r),t[0]=s*c+u*d,t[1]=s*l+u*p,t[2]=s*h+u*m,t[3]=s*f+u*v,t}function s(t,e){let n,r=e[0]+e[4]+e[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{let r=0;e[4]>e[0]&&(r=1),e[8]>e[3*r+r]&&(r=2);let i=(r+1)%3,o=(r+2)%3;n=Math.sqrt(e[3*r+r]-e[3*i+i]-e[3*o+o]+1),t[r]=.5*n,n=.5/n,t[3]=(e[3*i+o]-e[3*o+i])*n,t[i]=(e[3*i+r]+e[3*r+i])*n,t[o]=(e[3*o+r]+e[3*r+o])*n}return t}Object.defineProperty(e,"__esModule",{value:!0}),e.create=r,e.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},e.setAxisAngle=i,e.getAxisAngle=function(t,e){let n=2*Math.acos(e[3]),r=Math.sin(n/2);return 0!=r?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n},e.multiply=o,e.rotateX=function(t,e,n){n*=.5;let r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+a*s,t[1]=i*u+o*s,t[2]=o*u-i*s,t[3]=a*u-r*s,t},e.rotateY=function(t,e,n){n*=.5;let r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u-o*s,t[1]=i*u+a*s,t[2]=o*u+r*s,t[3]=a*u-i*s,t},e.rotateZ=function(t,e,n){n*=.5;let r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+i*s,t[1]=i*u-r*s,t[2]=o*u+a*s,t[3]=a*u-o*s,t},e.calculateW=function(t,e){let n=e[0],r=e[1],i=e[2];return t[0]=n,t[1]=r,t[2]=i,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),t},e.slerp=a,e.invert=function(t,e){let n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o,s=a?1/a:0;return t[0]=-n*s,t[1]=-r*s,t[2]=-i*s,t[3]=o*s,t},e.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},e.fromMat3=s,e.fromEuler=function(t,e,n,r){let i=.5*Math.PI/180;e*=i,n*=i,r*=i;let o=Math.sin(e),a=Math.cos(e),s=Math.sin(n),u=Math.cos(n),c=Math.sin(r),l=Math.cos(r);return t[0]=o*u*l-a*s*c,t[1]=a*s*l+o*u*c,t[2]=a*u*c-o*s*l,t[3]=a*u*l+o*s*c,t},e.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"};var u=n(1),c=n(18),l=n(19),h=n(20);const f=h.clone;e.clone=f;const d=h.fromValues;e.fromValues=d;const p=h.copy;e.copy=p;const m=h.set;e.set=m;const v=h.add;e.add=v;const b=o;e.mul=b;const g=h.scale;e.scale=g;const y=h.dot;e.dot=y;const w=h.lerp;e.lerp=w;const M=h.length;e.length=M;const _=M;e.len=_;const x=h.squaredLength;e.squaredLength=x;const S=x;e.sqrLen=S;const E=h.normalize;e.normalize=E;const A=h.exactEquals;e.exactEquals=A;const L=h.equals;e.equals=L;const R=function(){let t=l.create(),e=l.fromValues(1,0,0),n=l.fromValues(0,1,0);return function(r,o,a){let s=l.dot(o,a);return s<-.999999?(l.cross(t,e,o),l.len(t)<1e-6&&l.cross(t,n,o),l.normalize(t,t),i(r,t,Math.PI),r):s>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(l.cross(t,o,a),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+s,E(r,r))}}();e.rotationTo=R;const T=function(){let t=r(),e=r();return function(n,r,i,o,s,u){return a(t,r,s,u),a(e,i,o,u),a(n,t,e,2*u*(1-u)),n}}();e.sqlerp=T;const I=function(){let t=c.a();return function(e,n,r,i){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=i[0],t[4]=i[1],t[7]=i[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],E(e,s(e,t))}}();e.setAxes=I},function(t,e,n){"use strict";function r(){let t=new i.a(2);return t[0]=0,t[1]=0,t}var i=n(1);!function(){let t=r()}()},function(t,e,n){"use strict";var r=n(2);class i{constructor(t){const e=Object(r.b)();this.location=++i.location,this.data=new Float32Array(t),this.buffer=e.createBuffer(),e.bindBuffer(e.UNIFORM_BUFFER,this.buffer),e.bufferData(e.UNIFORM_BUFFER,this.data,e.STATIC_DRAW),e.bindBuffer(e.UNIFORM_BUFFER,null)}bind(){const t=Object(r.b)();t.bindBufferBase(t.UNIFORM_BUFFER,this.location,this.buffer)}update(t,e=0){const n=Object(r.b)();this.data.set(t,e),n.bindBuffer(n.UNIFORM_BUFFER,this.buffer),n.bufferSubData(n.UNIFORM_BUFFER,0,this.data,0,null),n.bindBuffer(n.UNIFORM_BUFFER,null)}}i.location=0,e.a=i},function(t,e,n){"use strict";class r{constructor(t,e,n){const r=[-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1];for(let i=0;i<r.length;i+=3)r[i+0]*=t,r[i+1]*=e,r[i+2]*=n;return{positions:r,indices:[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23],normals:[0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0],uvs:[0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]}}}e.a=r},function(t,e,n){"use strict";var r=n(10),i=n(0),o=n(2);class a extends r.a{constructor(t,e,n,r){console.assert(t&&e&&n&&r),super(),this.fov=t*(Math.PI/180),this.ratio=e,this.near=n,this.far=r,this.target=i.c.create(),this.up=i.c.fromValues(0,1,0),this.projectionMatrix=i.a.create(),this.viewMatrix=i.a.create(),this.position[0]=0,this.position[1]=0,this.position[2]=0}setTarget(t){i.c.copy(this.target,t)}lookAt(){i.a.lookAt(this.viewMatrix,this.position,this.target,this.up)}update(){Object(o.b)();i.a.perspective(this.projectionMatrix,this.fov,this.ratio,this.near,this.far)}}e.a=a},function(t,e,n){"use strict";var r=n(2),i=(n(0),n(23)),o=n(41);class a{constructor(t={}){t.map?(this._texture=new o.a,this._texture.createTexture(t.map),console.log("Created Texture!")):console.warn("Material must have a texture ATM!"),this.ka=t.ka||.5,this.kd=t.kd||.5,this.ks=t.ks||.5,this.shininess=t.shininess||96.078431;`#version 300 es\n      uniform perModel {\n        mat4 modelMatrix;\n        mat4 normalMatrix;\n      };\n\n      uniform perScene {\n        mat4 viewMatrix;\n        mat4 projectionMatrix;\n      };\n\n      in vec3 position;\n      in vec3 normal;\n      in vec2 uv;\n\n      out vec3 vPosition;\n      out vec3 vNormal;\n      out vec2 vUv;\n\n      void main() {\n        vNormal = normalize(vec3(normalMatrix * vec4(normal, 1.0)));\n        vUv = uv;\n        vPosition = vec3(viewMatrix * modelMatrix * vec4(position, 1.0));\n        gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.0);\n      }\n    `,`#version 300 es\n      precision mediump float;\n\n      const int MAX_DIRECTIONAL_LIGHTS = 16;\n\n      struct Directional {\n        vec4 color;\n        float intensity;\n        vec3 position;\n      };\n\n      uniform directional {\n        Directional directionalLights[MAX_DIRECTIONAL_LIGHTS];\n      };\n\n      uniform int numLights;\n      uniform vec3 color;\n      uniform sampler2D textureMap;\n\n      vec3 ka = vec3(0.8);\n      vec3 kd = vec3(0.64, 0.48, 0.32);\n      vec3 ks = vec3(0.5, 0.5, 0.5);\n      float shininess = 96.078431;\n\n      vec3 Ia = vec3(0.3);\n      vec3 Id = vec3(0.5);\n      vec3 Is = vec3(0.5);\n\n      in vec3 vPosition;\n      in vec3 vNormal;\n      in vec2 vUv;\n\n      out vec4 outColor;\n\n      void light(int lightIndex, vec3 pos, vec3 norm, out vec3 ambient, out vec3 diffuse, out vec3 spec) {\n        vec3 n = normalize(norm);\n        vec3 s = normalize(directionalLights[lightIndex].position - pos);\n        vec3 v = normalize(-pos);\n        vec3 r = reflect(-s,n);\n\n        ambient = Ia * ka;\n        float sDotN = max(dot(s,n), 0.0);\n        diffuse = Id * kd * sDotN;\n\n        spec = Is * ks * pow(max(dot(r,v) , 0.0 ), shininess);\n      }\n\n\n      void main() {\n        vec3 ambientSum = vec3(0);\n        vec3 diffuseSum = vec3(0);\n        vec3 specSum = vec3(0);\n        vec3 ambient, diffuse, spec;\n\n        if (gl_FrontFacing) {\n          for (int i = 0; i < numLights; ++i) {\n            light(i, vPosition, vNormal, ambient, diffuse, spec);\n            ambientSum += ambient;\n            diffuseSum += diffuse;\n            specSum += spec;\n          }\n        } else {\n          for (int i = 0; i < numLights; ++i) {\n            light(i, vPosition, -vNormal, ambient, diffuse, spec);\n            ambientSum += ambient;\n            diffuseSum += diffuse;\n            specSum += spec;\n          }\n        }\n        ambientSum /= float(numLights);\n\n        vec4 texColor = texture(textureMap, vUv);\n        outColor = vec4(ambientSum + diffuseSum, 1.0) * texColor + vec4(specSum, 1.0);\n      }\n    `;const e=Object(r.b)();this.uniforms={map:t.map||null,color:t.color||[1,1,1,1]},this.program=Object(i.a)(e,"#version 300 es\n      uniform perModel {\n        mat4 modelMatrix;\n        mat4 normalMatrix;\n      };\n\n      uniform perScene {\n        mat4 viewMatrix;\n        mat4 projectionMatrix;\n      };\n\n      in vec3 position;\n      in vec3 normal;\n      in vec2 uv;\n\n      out vec3 vPosition;\n      out vec3 vNormal;\n      out vec2 vUv;\n\n      void main() {\n        vNormal = normalize(vec3(normalMatrix * vec4(normal, 1.0)));\n        vUv = uv;\n        vPosition = vec3(viewMatrix * modelMatrix * vec4(position, 1.0));\n        gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.0);\n      }\n    ","#version 300 es\n      precision mediump float;\n\n      const int MAX_DIRECTIONAL_LIGHTS = 16;\n\n      struct Directional {\n        vec4 color;\n        float intensity;\n        vec3 position;\n      };\n\n      uniform directional {\n        Directional directionalLights[MAX_DIRECTIONAL_LIGHTS];\n      };\n\n      uniform int numLights;\n      uniform vec3 color;\n      uniform sampler2D textureMap;\n\n      vec3 ka = vec3(0.8);\n      vec3 kd = vec3(0.64, 0.48, 0.32);\n      vec3 ks = vec3(0.5, 0.5, 0.5);\n      float shininess = 96.078431;\n\n      vec3 Ia = vec3(0.3);\n      vec3 Id = vec3(0.5);\n      vec3 Is = vec3(0.5);\n\n      in vec3 vPosition;\n      in vec3 vNormal;\n      in vec2 vUv;\n\n      out vec4 outColor;\n\n      void light(int lightIndex, vec3 pos, vec3 norm, out vec3 ambient, out vec3 diffuse, out vec3 spec) {\n        vec3 n = normalize(norm);\n        vec3 s = normalize(directionalLights[lightIndex].position - pos);\n        vec3 v = normalize(-pos);\n        vec3 r = reflect(-s,n);\n\n        ambient = Ia * ka;\n        float sDotN = max(dot(s,n), 0.0);\n        diffuse = Id * kd * sDotN;\n\n        spec = Is * ks * pow(max(dot(r,v) , 0.0 ), shininess);\n      }\n\n\n      void main() {\n        vec3 ambientSum = vec3(0);\n        vec3 diffuseSum = vec3(0);\n        vec3 specSum = vec3(0);\n        vec3 ambient, diffuse, spec;\n\n        if (gl_FrontFacing) {\n          for (int i = 0; i < numLights; ++i) {\n            light(i, vPosition, vNormal, ambient, diffuse, spec);\n            ambientSum += ambient;\n            diffuseSum += diffuse;\n            specSum += spec;\n          }\n        } else {\n          for (int i = 0; i < numLights; ++i) {\n            light(i, vPosition, -vNormal, ambient, diffuse, spec);\n            ambientSum += ambient;\n            diffuseSum += diffuse;\n            specSum += spec;\n          }\n        }\n        ambientSum /= float(numLights);\n\n        vec4 texColor = texture(textureMap, vUv);\n        outColor = vec4(ambientSum + diffuseSum, 1.0) * texColor + vec4(specSum, 1.0);\n      }\n    "),this.programInfo={attribLocations:{position:e.getAttribLocation(this.program,"position"),normal:e.getAttribLocation(this.program,"normal"),uv:e.getAttribLocation(this.program,"uv")},uniformLocations:{numLights:e.getUniformLocation(this.program,"numLights"),projectionMatrix:e.getUniformLocation(this.program,"projectionMatrix"),modelViewMatrix:e.getUniformLocation(this.program,"modelViewMatrix"),normalMatrix:e.getUniformLocation(this.program,"normalMatrix"),color:e.getUniformLocation(this.program,"color"),map:e.getUniformLocation(this.program,"map")}}}setUniform(t,e){const n=Object(r.b)();switch(t){case"numLights":n.uniform1i(this.programInfo.uniformLocations.numLights,e);break;case"dLightPosition":n.uniform3fv(this.programInfo.uniformLocations.dLightPosition,e);break;case"dLightIntensity":n.uniform1f(this.programInfo.uniformLocations.dLightIntensity,e);break;case"modelViewMatrix":n.uniformMatrix4fv(this.programInfo.uniformLocations.modelViewMatrix,!1,e);break;case"projectionMatrix":n.uniformMatrix4fv(this.programInfo.uniformLocations.projectionMatrix,!1,e);break;case"normalMatrix":n.uniformMatrix4fv(this.programInfo.uniformLocations.normalMatrix,!1,e);break;case"textureMap":n.uniform1i(this.programInfo.uniformLocations.textureMap,e);default:console.warn("Unknown Uniform")}}setInternalUniforms(){const t=Object(r.b)();t.uniform3fv(this.programInfo.uniformLocations.color,this.uniforms.color),t.activeTexture(t.TEXTURE0),this._texture.bind(),t.uniform1i(this.programInfo.uniformLocations.textureMap,0)}activate(){Object(r.b)().useProgram(this.program)}}e.a=a},function(t,e,n){"use strict";var r=n(2);class i{constructor(){const t=Object(r.b)();this._textureSource=null,this._textureId=t.createTexture()}createTexture(t){const e=Object(r.b)();this._level=0,this._internalFormat=e.RGBA4,this._width=t.width,this._height=t.height,this._border=0,this._format=e.RGBA,this._dataType=e.UNSIGNED_BYTE,this._data=t.data,this.bind(),e.texImage2D(e.TEXTURE_2D,this._level,this._internalFormat,this._width,this._height,this._border,this._format,this._dataType,this._data),i.isPowerOf2(this._width)&&i.isPowerOf2(this._height)?e.generateMipmap(e.TEXTURE_2D):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR))}bind(){const t=Object(r.b)();t.bindTexture(t.TEXTURE_2D,this._textureId)}static isPowerOf2(t){return 0==(t&t-1)}}e.a=i},function(t,e,n){"use strict";var r=n(2),i=(n(0),n(23));class o{constructor(t={}){console.assert(t.color),this.color=t.color;`#version 300 es\n      uniform perModel {\n        mat4 modelMatrix;\n        mat4 normalMatrix;\n      };\n\n      uniform perScene {\n        mat4 viewMatrix;\n        mat4 projectionMatrix;\n      };\n\n      in vec3 position;\n      in vec3 normal;\n\n      out vec3 vPosition;\n      out vec3 vNormal;\n\n      void main() {\n        vNormal = normalize(vec3(normalMatrix * vec4(normal, 1.0)));\n        vPosition = vec3(viewMatrix * modelMatrix * vec4(position, 1.0));\n        // TODO texcoord\n        gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.0);\n      }\n    `,`#version 300 es\n      precision mediump float;\n\n      const int MAX_DIRECTIONAL_LIGHTS = 16;\n\n      struct Directional {\n        vec4 color;\n        float intensity;\n        vec3 position;\n      };\n\n      uniform directional {\n        Directional directionalLights[MAX_DIRECTIONAL_LIGHTS];\n      };\n\n      uniform int numLights;\n      uniform vec3 color;\n\n      vec3 ka = vec3(0.0);\n      vec3 kd = vec3(0.64, 0.48, 0.32);\n\n      vec3 Ia = vec3(0.0);\n      vec3 Id = vec3(0.5);\n\n      in vec3 vPosition;\n      in vec3 vNormal;\n\n      out vec4 outColor;\n\n      void light(int lightIndex, vec3 pos, vec3 norm, out vec3 ambient, out vec3 diffuse) {\n        vec3 n = normalize(norm);\n        vec3 s = normalize(directionalLights[lightIndex].position - pos);\n\n        ambient = Ia * ka;\n        float sDotN = max(dot(s,n), 0.0);\n        diffuse = Id * kd * sDotN;\n      }\n\n\n      void main() {\n        vec3 ambientSum = vec3(0);\n        vec3 diffuseSum = vec3(0);\n        vec3 ambient, diffuse, spec;\n\n        if (gl_FrontFacing) {\n          for (int i = 0; i < numLights; ++i) {\n            light(i, vPosition, vNormal, ambient, diffuse);\n            ambientSum += ambient;\n            diffuseSum += diffuse;\n          }\n        } else {\n          for (int i = 0; i < numLights; ++i) {\n            light(i, vPosition, -vNormal, ambient, diffuse);\n            ambientSum += ambient;\n            diffuseSum += diffuse;\n          }\n        }\n        ambientSum /= float(numLights);\n\n        //vec4 texColor = texture(Tex, data.TexCoord);\n        outColor = vec4(ambientSum + diffuseSum, 1.0);\n      }\n    `;const e=Object(r.b)();this.program=Object(i.a)(e,"#version 300 es\n      uniform perModel {\n        mat4 modelMatrix;\n        mat4 normalMatrix;\n      };\n\n      uniform perScene {\n        mat4 viewMatrix;\n        mat4 projectionMatrix;\n      };\n\n      in vec3 position;\n      in vec3 normal;\n\n      out vec3 vPosition;\n      out vec3 vNormal;\n\n      void main() {\n        vNormal = normalize(vec3(normalMatrix * vec4(normal, 1.0)));\n        vPosition = vec3(viewMatrix * modelMatrix * vec4(position, 1.0));\n        // TODO texcoord\n        gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.0);\n      }\n    ","#version 300 es\n      precision mediump float;\n\n      const int MAX_DIRECTIONAL_LIGHTS = 16;\n\n      struct Directional {\n        vec4 color;\n        float intensity;\n        vec3 position;\n      };\n\n      uniform directional {\n        Directional directionalLights[MAX_DIRECTIONAL_LIGHTS];\n      };\n\n      uniform int numLights;\n      uniform vec3 color;\n\n      vec3 ka = vec3(0.0);\n      vec3 kd = vec3(0.64, 0.48, 0.32);\n\n      vec3 Ia = vec3(0.0);\n      vec3 Id = vec3(0.5);\n\n      in vec3 vPosition;\n      in vec3 vNormal;\n\n      out vec4 outColor;\n\n      void light(int lightIndex, vec3 pos, vec3 norm, out vec3 ambient, out vec3 diffuse) {\n        vec3 n = normalize(norm);\n        vec3 s = normalize(directionalLights[lightIndex].position - pos);\n\n        ambient = Ia * ka;\n        float sDotN = max(dot(s,n), 0.0);\n        diffuse = Id * kd * sDotN;\n      }\n\n\n      void main() {\n        vec3 ambientSum = vec3(0);\n        vec3 diffuseSum = vec3(0);\n        vec3 ambient, diffuse, spec;\n\n        if (gl_FrontFacing) {\n          for (int i = 0; i < numLights; ++i) {\n            light(i, vPosition, vNormal, ambient, diffuse);\n            ambientSum += ambient;\n            diffuseSum += diffuse;\n          }\n        } else {\n          for (int i = 0; i < numLights; ++i) {\n            light(i, vPosition, -vNormal, ambient, diffuse);\n            ambientSum += ambient;\n            diffuseSum += diffuse;\n          }\n        }\n        ambientSum /= float(numLights);\n\n        //vec4 texColor = texture(Tex, data.TexCoord);\n        outColor = vec4(ambientSum + diffuseSum, 1.0);\n      }\n    "),this.programInfo={attribLocations:{position:e.getAttribLocation(this.program,"position"),normal:e.getAttribLocation(this.program,"normal")},uniformLocations:{numLights:e.getUniformLocation(this.program,"numLights"),color:e.getUniformLocation(this.program,"color"),projectionMatrix:e.getUniformLocation(this.program,"projectionMatrix"),modelViewMatrix:e.getUniformLocation(this.program,"modelViewMatrix"),normalMatrix:e.getUniformLocation(this.program,"normalMatrix")}}}setUniform(t,e){const n=Object(r.b)();switch(t){case"numLights":n.uniform1i(this.programInfo.uniformLocations.numLights,e);break;case"dLightPosition":n.uniform3fv(this.programInfo.uniformLocations.dLightPosition,e);break;case"dLightIntensity":n.uniform1f(this.programInfo.uniformLocations.dLightIntensity,e);break;case"modelViewMatrix":n.uniformMatrix4fv(this.programInfo.uniformLocations.modelViewMatrix,!1,e);break;case"projectionMatrix":n.uniformMatrix4fv(this.programInfo.uniformLocations.projectionMatrix,!1,e);break;case"normalMatrix":n.uniformMatrix4fv(this.programInfo.uniformLocations.normalMatrix,!1,e);break;default:console.warn("Unknown Uniform")}}setInternalUniforms(){Object(r.b)().uniform3fv(this.programInfo.uniformLocations.color,this.color)}activate(){Object(r.b)().useProgram(this.program)}}e.a=o},function(t,e,n){"use strict";(function(t){function r(t,e,n){return t<=e?e:t>=n?n:t}var i=n(0),o=n(2);const a=.5*-Math.PI;class s{constructor(e){const n=Object(o.b)();this.camera=e,this.domElement=n.canvas,this.radius=Math.max(e.position[0],e.position[2]),this.rx=Math.atan2(e.position[1],this.radius),this.ry=Math.atan2(e.position[2],e.position[0])+a,this.ox=0,this.oy=0,this.width=t.innerWidth,this.height=t.innerHeight,this.rotationSpeed=5*t.devicePixelRatio,this.zoomMin=.1,this.zoomMax=1/0,this.zoomSpeed=100,this.isDown=!1,this._listen()}_listen(){this.domElement.addEventListener("mousedown",this._onStart.bind(this),!1),this.domElement.addEventListener("mousemove",this._onMove.bind(this),!1),this.domElement.addEventListener("mouseup",this._onEnd.bind(this),!1),this.domElement.addEventListener("touchstart",this._onStart.bind(this),!1),this.domElement.addEventListener("touchmove",this._onMove.bind(this),!1),this.domElement.addEventListener("touchend",this._onEnd.bind(this),!1),t.addEventListener("mousewheel",this._onWheel.bind(this),!1)}_onStart(t){t.preventDefault(),this.oy=this.ry,this.ox=this.rx,this._startY=t.pageX/this.width,this._startX=t.pageY/this.height,this.isDown=!0}_onMove(t){if(this.isDown){const e=t.pageX/this.width,n=t.pageY/this.height;this.rx=this.ox+-(this._startX-n)*this.rotationSpeed,this.ry=this.oy+(this._startY-e)*this.rotationSpeed,this.rx=r(this.rx,.5*-Math.PI,.5*Math.PI)}}_onEnd(){this.isDown=!1}_onWheel(t){t.preventDefault();let e=0;t.wheelDelta?e=t.wheelDelta:t.detail&&(e=t.detail),this._zoom(-e)}_zoom(t){this.radius+=t/1e3*this.zoomSpeed,this.radius=r(this.radius,this.zoomMin,this.zoomMax)}update(){const t=this.radius*Math.sin(this.rx),e=this.radius*Math.cos(this.rx),n=Math.sin(this.ry)*e,r=Math.cos(this.ry)*e;i.c.set(this.camera.position,n,t,r),this.camera.lookAt()}}e.a=s}).call(e,n(3))},function(t,e,n){"use strict";var r=n(0),i=n(2);e.a=function(t,e){function n(t,e){return function(){e.apply(t,arguments)}}function o(t){t.preventDefault()}const a=Object(i.b)();this.camera=t,this.domElement=a.canvas,this.movementSpeed=1.5,this.rollSpeed=.12,this.dragToLook=!0,this.autoForward=!1,this.mouseStatus=0,this.moveState={up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0},this.moveVector=r.c.create(),this.rotationVector=r.c.create(),this.isDirty=!1,this.keydown=function(t){if(!t.altKey){switch(t.keyCode){case 16:this.movementSpeedMultiplier=.1;break;case 87:this.moveState.forward=1;break;case 83:this.moveState.back=1;break;case 65:this.moveState.left=1;break;case 68:this.moveState.right=1;break;case 82:this.moveState.up=1;break;case 70:this.moveState.down=1;break;case 38:this.moveState.pitchUp=1;break;case 40:this.moveState.pitchDown=1;break;case 37:this.moveState.yawLeft=1;break;case 39:this.moveState.yawRight=1;break;case 81:this.moveState.rollLeft=1;break;case 69:this.moveState.rollRight=1}this.updateMovementVector(),this.updateRotationVector()}},this.keyup=function(t){switch(t.keyCode){case 16:this.movementSpeedMultiplier=1;break;case 87:this.moveState.forward=0;break;case 83:this.moveState.back=0;break;case 65:this.moveState.left=0;break;case 68:this.moveState.right=0;break;case 82:this.moveState.up=0;break;case 70:this.moveState.down=0;break;case 38:this.moveState.pitchUp=0;break;case 40:this.moveState.pitchDown=0;break;case 37:this.moveState.yawLeft=0;break;case 39:this.moveState.yawRight=0;break;case 81:this.moveState.rollLeft=0;break;case 69:this.moveState.rollRight=0}this.updateMovementVector(),this.updateRotationVector()},this.mousedown=function(t){if(this.domElement!==document&&this.domElement.focus(),t.preventDefault(),t.stopPropagation(),this.dragToLook)this.mouseStatus++;else{switch(t.button){case 0:this.moveState.forward=1;break;case 2:this.moveState.back=1}this.updateMovementVector()}},this.mousemove=function(t){if(!this.dragToLook||this.mouseStatus>0){var e=this.getContainerDimensions(),n=e.size[0]/2,r=e.size[1]/2;this.moveState.yawLeft=-(t.pageX-e.offset[0]-n)/n,this.moveState.pitchDown=(t.pageY-e.offset[1]-r)/r,this.updateRotationVector()}},this.mouseup=function(t){if(t.preventDefault(),t.stopPropagation(),this.dragToLook)this.mouseStatus--,this.moveState.yawLeft=this.moveState.pitchDown=0;else{switch(t.button){case 0:this.moveState.forward=0;break;case 2:this.moveState.back=0}this.updateMovementVector()}this.updateRotationVector()},this.update=function(t=.9){const e=t*this.movementSpeed,n=1*t*this.rollSpeed,i=this.camera.viewMatrix,o=r.c.create();o[0]=i[0],o[1]=i[4],o[2]=i[8];const a=r.c.create();a[0]=i[2],a[1]=i[6],a[2]=i[10];const s=r.c.create();s[0]=i[1],s[1]=i[5],s[2]=i[11];const u=-this.moveVector[2],c=this.moveVector[1],l=this.moveVector[0];this.camera.position[0]+=(-u*a[0]+c*s[0]+l*o[0])*e,this.camera.position[1]+=(-u*a[1]+c*s[1]+l*o[1])*e,this.camera.position[2]+=(-u*a[2]+c*s[2]+l*o[2])*e,this.camera.rotation[0]+=this.rotationVector[0]*n,this.camera.rotation[1]+=this.rotationVector[1]*n,this.camera.rotation[2]+=-this.rotationVector[2]*n,r.b.identity(this.camera.quaternion),r.b.rotateX(this.camera.quaternion,this.camera.quaternion,this.camera.rotation[0]),r.b.rotateY(this.camera.quaternion,this.camera.quaternion,this.camera.rotation[1]),r.b.rotateZ(this.camera.quaternion,this.camera.quaternion,this.camera.rotation[2]);const h=r.b.getAxisAngle(this.camera.quaternionAxisAngle,this.camera.quaternion);r.a.identity(this.camera.viewMatrix);const f=r.c.create();r.c.negate(f,this.camera.position),r.a.create(),r.a.rotate(this.camera.viewMatrix,this.camera.viewMatrix,h,this.camera.quaternionAxisAngle),r.a.translate(this.camera.viewMatrix,this.camera.viewMatrix,f)},this.updateMovementVector=function(){const t=this.moveState.forward||this.autoForward&&!this.moveState.back?1:0;this.moveVector[0]=-this.moveState.left+this.moveState.right,this.moveVector[1]=-this.moveState.down+this.moveState.up,this.moveVector[2]=-t+this.moveState.back},this.updateRotationVector=function(){this.rotationVector[0]=this.moveState.pitchDown-this.moveState.pitchUp,this.rotationVector[1]=this.moveState.yawRight-this.moveState.yawLeft,this.rotationVector[2]=this.moveState.rollRight-this.moveState.rollLeft,this.isDirty=!0},this.getContainerDimensions=function(){return this.domElement!=document?{size:[this.domElement.offsetWidth,this.domElement.offsetHeight],offset:[this.domElement.offsetLeft,this.domElement.offsetTop]}:{size:[window.innerWidth,window.innerHeight],offset:[0,0]}},this.dispose=function(){this.domElement.removeEventListener("contextmenu",o,!1),this.domElement.removeEventListener("mousedown",u,!1),this.domElement.removeEventListener("mousemove",s,!1),this.domElement.removeEventListener("mouseup",c,!1),window.removeEventListener("keydown",l,!1),window.removeEventListener("keyup",h,!1)};var s=n(this,this.mousemove),u=n(this,this.mousedown),c=n(this,this.mouseup),l=n(this,this.keydown),h=n(this,this.keyup);this.domElement.addEventListener("contextmenu",o,!1),this.domElement.addEventListener("mousemove",s,!1),this.domElement.addEventListener("mousedown",u,!1),this.domElement.addEventListener("mouseup",c,!1),window.addEventListener("keydown",l,!1),window.addEventListener("keyup",h,!1),this.updateMovementVector(),this.updateRotationVector()}},function(t,e,n){"use strict";var r=n(10);n(0),n(21),n(22);class i extends r.a{constructor(t){super(),this._color=t&&t.color||[1,1,1,1],this._intensity=t&&t.intensity||.5}get color(){return this._color}get intensity(){return this._intensity}set color(t){this._color=t}set intensity(t){this._intensity=t}}e.a=i},function(t,e,n){"use strict";var r=n(9),i=n(47);class o{constructor(){}load(t){return new Promise(e=>{i.downloadMeshes(t,t=>{let n=[];Object.entries(t).forEach(([t,e])=>{const i=!e.vertexNormals||!e.vertexNormals.length||isNaN(e.vertexNormals[0]);i&&console.log("Generating normals manually ...");const o={positions:e.vertices,normals:i?Object(r.b)(e.vertices,e.indices):e.vertexNormals,indices:e.indices,uvs:e.textures};n.push(o)}),e(n)})})}loadModelsAndMaterials(t){return new Promise(e=>{i.downloadModels(t).then(t=>{let n=[];Object.entries(t).forEach(([t,e])=>{const i=!e.vertexNormals||!e.vertexNormals.length||isNaN(e.vertexNormals[0]),o=!e.textures||!e.textures.length||isNaN(e.textures[0]);i&&console.info("Generating normals manually ..."),o&&console.info("Generating UVs manually...");const a={positions:e.vertices,normals:i?Object(r.b)(e.vertices,e.indices):e.vertexNormals,indices:e.indices,uvs:o?Object(r.c)(e.vertices):e.textures,vertexMaterialIndices:e.vertexMaterialIndices,materialIndices:e.materialIndices,name:t,materialNames:e.materialNames,materialsByIndex:e.materialsByIndex,hasMaterials:e.has_materials};n.push(a)}),e(n)})})}}e.a=o},function(t,e,n){!function(e,n){t.exports=n()}(0,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=3)}([function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t){switch(t){case"BYTE":case"UNSIGNED_BYTE":return 1;case"SHORT":case"UNSIGNED_SHORT":return 2;case"FLOAT":return 4}}Object.defineProperty(e,"__esModule",{value:!0});var o=e.Layout=function t(){r(this,t);for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];this.attributes=n;var o=0,s=0,u=!0,c=!1,l=void 0;try{for(var h,f=n[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var d=h.value;if(this[d.key])throw new a(d);o%d.sizeOfType!=0&&(o+=d.sizeOfType-o%d.sizeOfType),this[d.key]={attribute:d,size:d.size,type:d.type,normalized:d.normalized,offset:o},o+=d.sizeInBytes,s=Math.max(s,d.sizeOfType)}}catch(t){c=!0,l=t}finally{try{!u&&f.return&&f.return()}finally{if(c)throw l}}o%s!=0&&(o+=s-o%s),this.stride=o;var p=!0,m=!1,v=void 0;try{for(var b,g=n[Symbol.iterator]();!(p=(b=g.next()).done);p=!0)this[b.value.key].stride=this.stride}catch(t){m=!0,v=t}finally{try{!p&&g.return&&g.return()}finally{if(m)throw v}}},a=function t(e){r(this,t),this.message="found duplicate attribute: "+e.key},s=function t(e,n,o){arguments.length>3&&void 0!==arguments[3]&&arguments[3],r(this,t),this.key=e,this.size=n,this.type=o,this.normalized=!1,this.sizeOfType=i(o),this.sizeInBytes=this.sizeOfType*n};o.POSITION=new s("position",3,"FLOAT"),o.NORMAL=new s("normal",3,"FLOAT"),o.TANGENT=new s("tangent",3,"FLOAT"),o.BITANGENT=new s("bitangent",3,"FLOAT"),o.UV=new s("uv",2,"FLOAT"),o.MATERIAL_INDEX=new s("materialIndex",1,"SHORT"),o.MATERIAL_ENABLED=new s("materialEnabled",1,"UNSIGNED_SHORT"),o.AMBIENT=new s("ambient",3,"FLOAT"),o.DIFFUSE=new s("diffuse",3,"FLOAT"),o.SPECULAR=new s("specular",3,"FLOAT"),o.SPECULAR_EXPONENT=new s("specularExponent",3,"FLOAT"),o.EMISSIVE=new s("emissive",3,"FLOAT"),o.TRANSMISSION_FILTER=new s("transmissionFilter",3,"FLOAT"),o.DISSOLVE=new s("dissolve",1,"FLOAT"),o.ILLUMINATION=new s("illumination",1,"UNSIGNED_SHORT"),o.REFRACTION_INDEX=new s("refractionIndex",1,"FLOAT"),o.SHARPNESS=new s("sharpness",1,"FLOAT"),o.MAP_DIFFUSE=new s("mapDiffuse",1,"SHORT"),o.MAP_AMBIENT=new s("mapAmbient",1,"SHORT"),o.MAP_SPECULAR=new s("mapSpecular",1,"SHORT"),o.MAP_SPECULAR_EXPONENT=new s("mapSpecularExponent",1,"SHORT"),o.MAP_DISSOLVE=new s("mapDissolve",1,"SHORT"),o.ANTI_ALIASING=new s("antiAliasing",1,"UNSIGNED_SHORT"),o.MAP_BUMP=new s("mapBump",1,"SHORT"),o.MAP_DISPLACEMENT=new s("mapDisplacement",1,"SHORT"),o.MAP_DECAL=new s("mapDecal",1,"SHORT"),o.MAP_EMISSIVE=new s("mapEmissive",1,"SHORT")},function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(0),s=function(){function t(e,n){i(this,t),(n=n||{}).materials=n.materials||[];var o=this;o.has_materials=!!n.materials,o.materials={},o.vertices=[],o.vertexNormals=[],o.textures=[],o.indices=[],this.name="";var a=[],s=[],u=[],c={},l=[],h={},f=-1;c.verts=[],c.norms=[],c.textures=[],c.hashindices={},c.indices=[],c.materialIndices=[],c.index=0;for(var d=/^v\s/,p=/^vn\s/,m=/^vt\s/,v=/^f\s/,b=/\s+/,g=/^usemtl/,y=e.split("\n"),w=0;w<y.length;w++){var M=y[w].trim();if(M&&!M.startsWith("#")){var _=M.split(b);if(_.shift(),d.test(M))a.push.apply(a,r(_));else if(p.test(M))s.push.apply(s,r(_));else if(m.test(M))u.push.apply(u,r(_));else if(g.test(M)){var x=_[0];x in h||(l.push(x),h[x]=l.length-1),f=h[x]}else if(v.test(M))for(var S=!1,E=0,A=_.length;E<A;E++){3!==E||S||(E=2,S=!0);var L=_[0]+","+f,R=_[E]+","+f;if(R in c.hashindices)c.indices.push(c.hashindices[R]);else{var T=_[E].split("/"),I=T.length-1;c.verts.push(+a[3*(T[0]-1)+0]),c.verts.push(+a[3*(T[0]-1)+1]),c.verts.push(+a[3*(T[0]-1)+2]),u.length&&(c.textures.push(+u[2*(T[1]-1)+0]),c.textures.push(+u[2*(T[1]-1)+1])),c.norms.push(+s[3*(T[I]-1)+0]),c.norms.push(+s[3*(T[I]-1)+1]),c.norms.push(+s[3*(T[I]-1)+2]),c.materialIndices.push(f),c.hashindices[R]=c.index,c.indices.push(c.index),c.index+=1}3===E&&S&&c.indices.push(c.hashindices[L])}}}o.vertices=c.verts,o.vertexNormals=c.norms,o.textures=c.textures,o.vertexMaterialIndices=c.materialIndices,o.indices=c.indices,o.materialNames=l,o.materialIndices=h,o.materialsByIndex={}}return o(t,[{key:"makeBufferData",value:function(t){var e=this.vertices.length/3,n=new ArrayBuffer(t.stride*e);n.numItems=e;for(var r=new DataView(n),i=0,o=0;i<e;i++){o=i*t.stride;var s=!0,u=!1,c=void 0;try{for(var l,h=t.attributes[Symbol.iterator]();!(s=(l=h.next()).done);s=!0){var f=l.value,d=o+t[f.key].offset;switch(f.key){case a.Layout.POSITION.key:r.setFloat32(d,this.vertices[3*i],!0),r.setFloat32(d+4,this.vertices[3*i+1],!0),r.setFloat32(d+8,this.vertices[3*i+2],!0);break;case a.Layout.UV.key:r.setFloat32(d,this.textures[2*i],!0),r.setFloat32(d+4,this.vertices[2*i+1],!0);break;case a.Layout.NORMAL.key:r.setFloat32(d,this.vertexNormals[3*i],!0),r.setFloat32(d+4,this.vertexNormals[3*i+1],!0),r.setFloat32(d+8,this.vertexNormals[3*i+2],!0);break;case a.Layout.MATERIAL_INDEX.key:r.setInt16(d,this.vertexMaterialIndices[i],!0);break;case a.Layout.AMBIENT.key:var p=this.vertexMaterialIndices[i],m=this.materialsByIndex[p];if(!m)break;r.setFloat32(d,m.ambient[0],!0),r.setFloat32(d+4,m.ambient[1],!0),r.setFloat32(d+8,m.ambient[2],!0);break;case a.Layout.DIFFUSE.key:var v=this.vertexMaterialIndices[i],b=this.materialsByIndex[v];if(!b)break;r.setFloat32(d,b.diffuse[0],!0),r.setFloat32(d+4,b.diffuse[1],!0),r.setFloat32(d+8,b.diffuse[2],!0);break;case a.Layout.SPECULAR.key:var g=this.vertexMaterialIndices[i],y=this.materialsByIndex[g];if(!y)break;r.setFloat32(d,y.specular[0],!0),r.setFloat32(d+4,y.specular[1],!0),r.setFloat32(d+8,y.specular[2],!0);break;case a.Layout.SPECULAR_EXPONENT.key:var w=this.vertexMaterialIndices[i],M=this.materialsByIndex[w];if(!M)break;r.setFloat32(d,M.specularExponent,!0);break;case a.Layout.EMISSIVE.key:var _=this.vertexMaterialIndices[i],x=this.materialsByIndex[_];if(!x)break;r.setFloat32(d,x.emissive[0],!0),r.setFloat32(d+4,x.emissive[1],!0),r.setFloat32(d+8,x.emissive[2],!0);break;case a.Layout.TRANSMISSION_FILTER.key:var S=this.vertexMaterialIndices[i],E=this.materialsByIndex[S];if(!E)break;r.setFloat32(d,E.transmissionFilter[0],!0),r.setFloat32(d+4,E.transmissionFilter[1],!0),r.setFloat32(d+8,E.transmissionFilter[2],!0);break;case a.Layout.DISSOLVE.key:var A=this.vertexMaterialIndices[i],L=this.materialsByIndex[A];if(!L)break;r.setFloat32(d,L.dissolve,!0);break;case a.Layout.ILLUMINATION.key:var R=this.vertexMaterialIndices[i],T=this.materialsByIndex[R];if(!T)break;r.setInt16(d,T.illumination,!0);break;case a.Layout.REFRACTION_INDEX.key:var I=this.vertexMaterialIndices[i],k=this.materialsByIndex[I];if(!k)break;r.setFloat32(d,k.refractionIndex,!0);break;case a.Layout.SHARPNESS.key:var O=this.vertexMaterialIndices[i],P=this.materialsByIndex[O];if(!P)break;r.setFloat32(d,P.sharpness,!0);break;case a.Layout.ANTI_ALIASING.key:var B=this.vertexMaterialIndices[i],U=this.materialsByIndex[B];if(!U)break;r.setInt16(d,U.antiAliasing,!0)}}}catch(t){u=!0,c=t}finally{try{!s&&h.return&&h.return()}finally{if(u)throw c}}}return n}},{key:"makeIndexBufferData",value:function(){var t=new Uint16Array(this.indices);return t.numItems=this.indices.length,t}},{key:"addMaterialLibrary",value:function(t){for(var e in t.materials)if(e in this.materialIndices){var n=t.materials[e],r=this.materialIndices[n.name];this.materialsByIndex[r]=n}}}]),t}();e.default=s},function(t,e,n){"use strict";function r(t){return Array.isArray(t)?t:Array.from(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=e.Material=function t(e){i(this,t),this.name=e,this.ambient=[0,0,0],this.diffuse=[0,0,0],this.specular=[0,0,0],this.emissive=[0,0,0],this.transmissionFilter=[0,0,0],this.dissolve=0,this.specularExponent=0,this.transparency=0,this.illumination=0,this.refractionIndex=1,this.sharpness=0,this.mapDiffuse=null,this.mapAmbient=null,this.mapSpecular=null,this.mapSpecularExponent=null,this.mapDissolve=null,this.antiAliasing=!1,this.mapBump=null,this.mapDisplacement=null,this.mapDecal=null,this.mapEmissive=null,this.mapReflections=[]};e.MaterialLibrary=function(){function t(e){i(this,t),this.data=e,this.currentMaterial=null,this.materials={},this.parse()}return o(t,[{key:"parse_newmtl",value:function(t){var e=t[0];this.currentMaterial=new a(e),this.materials[e]=this.currentMaterial}},{key:"parseColor",value:function(t){if("spectral"!=t[0]&&"xyz"!=t[0]){if(3==t.length)return t.map(parseFloat);var e=parseFloat(t[0]);return[e,e,e]}}},{key:"parse_Ka",value:function(t){this.currentMaterial.ambient=this.parseColor(t)}},{key:"parse_Kd",value:function(t){this.currentMaterial.diffuse=this.parseColor(t)}},{key:"parse_Ks",value:function(t){this.currentMaterial.specular=this.parseColor(t)}},{key:"parse_Ke",value:function(t){this.currentMaterial.emissive=this.parseColor(t)}},{key:"parse_Tf",value:function(t){this.currentMaterial.transmissionFilter=this.parseColor(t)}},{key:"parse_d",value:function(t){this.currentMaterial.dissolve=parseFloat(t.pop())}},{key:"parse_illum",value:function(t){this.currentMaterial.illumination=parseInt(t[0])}},{key:"parse_Ni",value:function(t){this.currentMaterial.refractionIndex=parseFloat(t[0])}},{key:"parse_Ns",value:function(t){this.currentMaterial.specularExponent=parseInt(t[0])}},{key:"parse_sharpness",value:function(t){this.currentMaterial.sharpness=parseInt(t[0])}},{key:"parse_cc",value:function(t,e){e.colorCorrection="on"==t[0]}},{key:"parse_blendu",value:function(t,e){e.horizontalBlending="on"==t[0]}},{key:"parse_blendv",value:function(t,e){e.verticalBlending="on"==t[0]}},{key:"parse_boost",value:function(t,e){e.boostMipMapSharpness=parseFloat(t[0])}},{key:"parse_mm",value:function(t,e){e.modifyTextureMap.brightness=parseFloat(t[0]),e.modifyTextureMap.contrast=parseFloat(t[1])}},{key:"parse_ost",value:function(t,e,n){for(;t.length<3;)t.push(n);e.u=parseFloat(t[0]),e.v=parseFloat(t[1]),e.w=parseFloat(t[2])}},{key:"parse_o",value:function(t,e){this.parse_ost(t,e.offset,0)}},{key:"parse_s",value:function(t,e){this.parse_ost(t,e.scale,1)}},{key:"parse_t",value:function(t,e){this.parse_ost(t,e.turbulence,0)}},{key:"parse_texres",value:function(t,e){e.textureResolution=parseFloat(t[0])}},{key:"parse_clamp",value:function(t,e){e.clamp="on"==t[0]}},{key:"parse_bm",value:function(t,e){e.bumpMultiplier=parseFloat(t[0])}},{key:"parse_imfchan",value:function(t,e){e.imfChan=t[0]}},{key:"parse_type",value:function(t,e){e.reflectionType=t[0]}},{key:"parseOptions",value:function(t){var e={colorCorrection:!1,horizontalBlending:!0,verticalBlending:!0,boostMipMapSharpness:0,modifyTextureMap:{brightness:0,contrast:1},offset:{u:0,v:0,w:0},scale:{u:1,v:1,w:1},turbulence:{u:0,v:0,w:0},clamp:!1,textureResolution:null,bumpMultiplier:1,imfChan:null},n=void 0,r=void 0,i={};for(t.reverse();t.length;){var o=t.pop();o.startsWith("-")?(n=o.substr(1),i[n]=[]):i[n].push(o)}for(n in i)if(i.hasOwnProperty(n)){r=i[n];var a=this["parse_"+n];a&&a.bind(this)(r,e)}return e}},{key:"parseMap",value:function(t){var e=void 0,n=void 0;if(t[0].startsWith("-"))e=t.pop(),n=t;else{var i=r(t);e=i[0],n=i.slice(1)}return n=this.parseOptions(n),n.filename=e,n}},{key:"parse_map_Ka",value:function(t){this.currentMaterial.mapAmbient=this.parseMap(t)}},{key:"parse_map_Kd",value:function(t){this.currentMaterial.mapDiffuse=this.parseMap(t)}},{key:"parse_map_Ks",value:function(t){this.currentMaterial.mapSpecular=this.parseMap(t)}},{key:"parse_map_Ke",value:function(t){this.currentMaterial.mapEmissive=this.parseMap(t)}},{key:"parse_map_Ns",value:function(t){this.currentMaterial.mapSpecularExponent=this.parseMap(t)}},{key:"parse_map_d",value:function(t){this.currentMaterial.mapDissolve=this.parseMap(t)}},{key:"parse_map_aat",value:function(t){this.currentMaterial.antiAliasing="on"==t[0]}},{key:"parse_map_bump",value:function(t){this.currentMaterial.mapBump=this.parseMap(t)}},{key:"parse_bump",value:function(t){this.parse_map_bump(t)}},{key:"parse_disp",value:function(t){this.currentMaterial.mapDisplacement=this.parseMap(t)}},{key:"parse_decal",value:function(t){this.currentMaterial.mapDecal=this.parseMap(t)}},{key:"parse_refl",value:function(t){this.currentMaterial.mapReflections.push(this.parseMap(t))}},{key:"parse",value:function(){var t=this.data.split(/\r?\n/),e=!0,n=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){var s=o.value;if((s=s.trim())&&!s.startsWith("#")){var u=s.split(/\s/),c=void 0,l=r(u);c=l[0],u=l.slice(1);var h=this["parse_"+c];h&&h.bind(this)(u)}}}catch(t){n=!0,i=t}finally{try{!e&&a.return&&a.return()}finally{if(n)throw i}}delete this.data,this.currentMaterial=null}}]),t}()},function(t,e,n){t.exports=n(4)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.deleteMeshBuffers=e.initMeshBuffers=e.downloadMeshes=e.downloadModels=e.Layout=e.MaterialLibrary=e.Material=e.Mesh=void 0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(1)),i=n(2),o=n(0),a=n(5);e.Mesh=r.default,e.Material=i.Material,e.MaterialLibrary=i.MaterialLibrary,e.Layout=o.Layout,e.downloadModels=a.downloadModels,e.downloadMeshes=a.downloadMeshes,e.initMeshBuffers=a.initMeshBuffers,e.deleteMeshBuffers=a.deleteMeshBuffers},function(t,e,n){"use strict";function r(t,e){var n=["mapDiffuse","mapAmbient","mapSpecular","mapDissolve","mapBump","mapDisplacement","mapDecal","mapEmissive"];e.endsWith("/")||(e+="/");var r=[];for(var i in t.materials)if(t.materials.hasOwnProperty(i)){i=t.materials[i];var o=!0,a=!1,s=void 0;try{for(var u,c=n[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var l=u.value;!function(t){var n=i[l];if(!n)return"continue";var o=e+n.filename;r.push(fetch(o).then(function(t){if(!t.ok)throw new Error;return t.blob()}).then(function(t){var e=new Image;e.src=URL.createObjectURL(t),n.texture=e}).catch(function(){}))}()}}catch(t){a=!0,s=t}finally{try{!o&&c.return&&c.return()}finally{if(a)throw s}}}return Promise.all(r)}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.downloadModels=function(t){var e=[],n=!0,s=!1,u=void 0;try{for(var c,l=t[Symbol.iterator]();!(n=(c=l.next()).done);n=!0)!function(t){var n=[];if(!t.obj)throw new Error('"obj" attribute of model object not set. The .obj file is required to be set in order to use downloadModels()');var i=t.name;if(!i){var s=t.obj.split("/");i=s[s.length-1].replace(".obj","")}if(n.push(Promise.resolve(i)),n.push(fetch(t.obj).then(function(t){return t.text()}).then(function(t){return new o.default(t)})),t.mtl){var u=t.mtl;"boolean"==typeof u&&(u=t.obj.replace(/\.obj$/,".mtl")),n.push(fetch(u).then(function(t){return t.text()}).then(function(e){var n=new a.MaterialLibrary(e);if(!1!==t.downloadMtlTextures){var i=t.mtlTextureRoot;return i||(i=u.substr(0,u.lastIndexOf("/"))),Promise.all([Promise.resolve(n),r(n,i)])}return Promise.all(Promise.resolve(n))}).then(function(t){return t[0]}))}e.push(Promise.all(n))}(c.value)}catch(t){s=!0,u=t}finally{try{!n&&l.return&&l.return()}finally{if(s)throw u}}return Promise.all(e).then(function(t){var e={},n=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var u=a.value,c=i(u,3),l=c[0],h=c[1],f=c[2];h.name=l,f&&h.addMaterialLibrary(f),e[l]=h}}catch(t){r=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}return e})},e.downloadMeshes=function(t,e,n){void 0===n&&(n={});var r=[];for(var a in t)!function(e){if(!t.hasOwnProperty(e))return"continue";var n=t[e];r.push(fetch(n).then(function(t){return t.text()}).then(function(t){return[e,new o.default(t)]}))}(a);Promise.all(r).then(function(t){var r=!0,o=!1,a=void 0;try{for(var s,u=t[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var c=s.value,l=i(c,2),h=l[0],f=l[1];n[h]=f}}catch(t){o=!0,a=t}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return e(n)})},e.initMeshBuffers=function(t,e){e.normalBuffer=s(t,t.ARRAY_BUFFER,e.vertexNormals,3),e.textureBuffer=s(t,t.ARRAY_BUFFER,e.textures,2),e.vertexBuffer=s(t,t.ARRAY_BUFFER,e.vertices,3),e.indexBuffer=s(t,t.ELEMENT_ARRAY_BUFFER,e.indices,1)},e.deleteMeshBuffers=function(t,e){t.deleteBuffer(e.normalBuffer),t.deleteBuffer(e.textureBuffer),t.deleteBuffer(e.vertexBuffer),t.deleteBuffer(e.indexBuffer)};var o=function(t){return t&&t.__esModule?t:{default:t}}(n(1)),a=n(2),s=(n(0),function(t,e,n,r){var i=t.createBuffer(),o=e===t.ARRAY_BUFFER?Float32Array:Uint16Array;return t.bindBuffer(e,i),t.bufferData(e,new o(n),t.STATIC_DRAW),i.itemSize=r,i.numItems=n.length/r,i})}])})},function(t,e,n){"use strict";var r=n(49),i=n.n(r);n(9);class o{constructor(){this.loader=new i.a}load(t){const e=t.suzanne[0],n=t.suzanne[1];return new Promise(t=>{this.loader.load(e,n,(e,n)=>{t(void 0)})})}}e.a=o},function(t,e,n){function r(){this.vertices=[],this.normals=[],this.textureCoords=[],this.faces=[],this.facesMaterialsIndex=[{materialName:null,materialStartIndex:0}],this.materials=[]}var i=n(24),o=n(62),a=n(64);r.prototype.load=function(t,e,n){var r=this;"function"==typeof e&&(n=e,e=""),a(t,function(t,i,s){t&&n(t),r.createReadStream(s).pipe(o()).on("data",function(t){r.parseObj(t)}).on("end",function(){"string"==typeof e&&""!==e?a(e,function(t,e,i){t&&n(t);var a={};r.createReadStream(i).pipe(o()).on("data",function(t){a=r.parseMtl(t,a)}).on("end",function(){a.name&&r.materials.push(a),n(null,{vertices:r.vertices,normals:r.normals,textureCoords:r.textureCoords,faces:r.faces,facesMaterialsIndex:r.facesMaterialsIndex,materials:r.materials})}).on("err",function(t){n(t)})}):n(null,{vertices:r.vertices,normals:r.normals,textureCoords:r.textureCoords,faces:r.faces})}).on("err",function(t){n(t)})})},r.prototype.createReadStream=function(t){var e=new i.Readable;return e._read=function(){},e.push(t),e.push(null),e},r.prototype.parseObj=function(t){var e=t.indexOf("#");-1!=e&&(t=t.substring(0,e));var n=(t=t.trim()).split(/\s+/);if("v"===n[0]){var r=[Number(n[1]),Number(n[2]),Number(n[3]),n[4]?1:Number(n[4])];this.vertices.push(r)}else if("vt"===n[0]){var i=[Number(n[1]),Number(n[2]),n[3]?1:Number(n[3])];this.textureCoords.push(i)}else if("vn"===n[0]){var o=[Number(n[1]),Number(n[2]),Number(n[3])];this.normals.push(o)}else if("f"===n[0]){for(var a={indices:[],texture:[],normal:[]},s=1;s<n.length;++s){var u=n[s].indexOf("//"),c=n[s].split(/\W+/);u>0?(a.indices.push(c[0]),a.normal.push(c[1])):1===c.length?a.indices.push(c[0]):2===c.length?(a.indices.push(c[0]),a.texture.push(c[1])):3===c.length&&(a.indices.push(c[0]),a.texture.push(c[1]),a.normal.push(c[2]))}this.faces.push(a)}else if("usemtl"===n[0])if(0===this.faces.length)this.facesMaterialsIndex[0].materialName=n[1];else{var l=n[1],h=this.faces.length;this.facesMaterialsIndex.push({materialName:l,materialStartIndex:h})}},r.prototype.parseMtl=function(t,e){var n=t.indexOf("#");-1!=n&&(t=t.substring(0,n));var r=(t=t.trim()).split(/\s+/);if("newmtl"===r[0])e.name&&(this.materials.push(e),e={}),e.name=r[1];else if("Ka"===r[0]){e.ambient=[];for(i=0;i<3;++i)e.ambient.push(r[i+1])}else if("Kd"===r[0]){e.diffuse=[];for(i=0;i<3;++i)e.diffuse.push(r[i+1])}else if("Ks"===r[0]){e.specular=[];for(var i=0;i<3;++i)e.specular.push(r[i+1])}else"Ns"===r[0]?e.specularExponent=r[1]:"d"===r[0]||"Tr"===r[0]?e.transparent=r[1]:"illum"===r[0]?e.illumMode=r[1]:"map_Ka"===r[0]?e.ambientMap=r[1]:"map_Kd"===r[0]?e.diffuseMap=r[1]:"map_Ks"===r[0]?e.specularMap=r[1]:"map_d"===r[0]?e.alphaMat=r[1]:"map_bump"===r[0]||"bump"===r[0]?e.bumpMap=r[1]:"disp"===r[0]&&(e.displacementMap=r[1]);return e},t.exports=r},function(t,e,n){"use strict";function r(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function i(t){return a[t>>18&63]+a[t>>12&63]+a[t>>6&63]+a[63&t]}function o(t,e,n){for(var r,o=[],a=e;a<n;a+=3)r=(t[a]<<16)+(t[a+1]<<8)+t[a+2],o.push(i(r));return o.join("")}e.byteLength=function(t){return 3*t.length/4-r(t)},e.toByteArray=function(t){var e,n,i,o,a,c=t.length;o=r(t),a=new u(3*c/4-o),n=o>0?c-4:c;var l=0;for(e=0;e<n;e+=4)i=s[t.charCodeAt(e)]<<18|s[t.charCodeAt(e+1)]<<12|s[t.charCodeAt(e+2)]<<6|s[t.charCodeAt(e+3)],a[l++]=i>>16&255,a[l++]=i>>8&255,a[l++]=255&i;return 2===o?(i=s[t.charCodeAt(e)]<<2|s[t.charCodeAt(e+1)]>>4,a[l++]=255&i):1===o&&(i=s[t.charCodeAt(e)]<<10|s[t.charCodeAt(e+1)]<<4|s[t.charCodeAt(e+2)]>>2,a[l++]=i>>8&255,a[l++]=255&i),a},e.fromByteArray=function(t){for(var e,n=t.length,r=n%3,i="",s=[],u=0,c=n-r;u<c;u+=16383)s.push(o(t,u,u+16383>c?c:u+16383));return 1===r?(e=t[n-1],i+=a[e>>2],i+=a[e<<4&63],i+="=="):2===r&&(e=(t[n-2]<<8)+t[n-1],i+=a[e>>10],i+=a[e>>4&63],i+=a[e<<2&63],i+="="),s.push(i),s.join("")};for(var a=[],s=[],u="undefined"!=typeof Uint8Array?Uint8Array:Array,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0,h=c.length;l<h;++l)a[l]=c[l],s[c.charCodeAt(l)]=l;s["-".charCodeAt(0)]=62,s["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,h=n?i-1:0,f=n?-1:1,d=t[e+h];for(h+=f,o=d&(1<<-l)-1,d>>=-l,l+=s;l>0;o=256*o+t[e+h],h+=f,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+t[e+h],h+=f,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),o-=c}return(d?-1:1)*a*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,h=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+h>=1?f/u:f*Math.pow(2,1-h))*u>=2&&(a++,u/=2),a+h>=l?(s=0,a=l):a+h>=1?(s=(e*u-1)*Math.pow(2,i),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;t[n+d]=255&s,d+=p,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;t[n+d]=255&a,d+=p,a/=256,c-=8);t[n+d-p]|=128*m}},function(t,e){},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e,n){t.copy(e,n)}var o=n(13).Buffer;t.exports=function(){function t(){r(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n},t.prototype.concat=function(t){if(0===this.length)return o.alloc(0);if(1===this.length)return this.head.data;for(var e=o.allocUnsafe(t>>>0),n=this.head,r=0;n;)i(n.data,e,r),r+=n.data.length,n=n.next;return e},t}()},function(t,e,n){function r(t,e){this._id=t,this._clearFn=e}var i=Function.prototype.apply;e.setTimeout=function(){return new r(i.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new r(i.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(55),e.setImmediate=setImmediate,e.clearImmediate=clearImmediate},function(t,e,n){(function(t,e){!function(t,n){"use strict";function r(t){delete u[t]}function i(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(n,r)}}function o(t){if(c)setTimeout(o,0,t);else{var e=u[t];if(e){c=!0;try{i(e)}finally{r(t),c=!1}}}}if(!t.setImmediate){var a,s=1,u={},c=!1,l=t.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(t);h=h&&h.setTimeout?h:t,"[object process]"==={}.toString.call(t.process)?a=function(t){e.nextTick(function(){o(t)})}:function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?function(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"==typeof n.data&&0===n.data.indexOf(e)&&o(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),a=function(n){t.postMessage(e+n,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){o(t.data)},a=function(e){t.port2.postMessage(e)}}():l&&"onreadystatechange"in l.createElement("script")?function(){var t=l.documentElement;a=function(e){var n=l.createElement("script");n.onreadystatechange=function(){o(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}():a=function(t){setTimeout(o,0,t)},h.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var r={callback:t,args:e};return u[s]=r,a(s),s++},h.clearImmediate=r}}("undefined"==typeof self?void 0===t?this:t:self)}).call(e,n(3),n(6))},function(t,e,n){(function(e){function n(t){try{if(!e.localStorage)return!1}catch(t){return!1}var n=e.localStorage[t];return null!=n&&"true"===String(n).toLowerCase()}t.exports=function(t,e){if(n("noDeprecation"))return t;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(e);n("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}}}).call(e,n(3))},function(t,e,n){"use strict";function r(t){if(!(this instanceof r))return new r(t);i.call(this,t)}t.exports=r;var i=n(29),o=n(7);o.inherits=n(5),o.inherits(r,i),r.prototype._transform=function(t,e,n){n(null,t)}},function(t,e,n){t.exports=n(15)},function(t,e,n){t.exports=n(4)},function(t,e,n){t.exports=n(12).Transform},function(t,e,n){t.exports=n(12).PassThrough},function(t,e,n){var r=n(63),i=n(16).StringDecoder;t.exports=function(t,e,n){function o(t,n){if(e){try{n=e(n)}catch(e){return t.emit("error",e)}void 0!==n&&t.queue(n)}else t.queue(n)}function a(e,n){var r=((null!=u?u:"")+n).split(t);u=r.pop(),c&&u.length>c&&e.emit("error",new Error("maximum buffer reached"));for(var i=0;i<r.length;i++)o(e,r[i])}var s=new i,u="",c=n&&n.maxLength;return"function"==typeof t&&(e=t,t=null),t||(t=/\r?\n/),r(function(t){a(this,s.write(t))},function(){s.end&&a(this,s.end()),null!=u&&o(this,u),this.queue(null)})}},function(t,e,n){(function(r){function i(t,e,n){function i(){for(;c.length&&!h.paused;){var t=c.shift();if(null===t)return h.emit("end");h.emit("data",t)}}function a(){h.writable=!1,e.call(h),!h.readable&&h.autoDestroy&&h.destroy()}t=t||function(t){this.queue(t)},e=e||function(){this.queue(null)};var s=!1,u=!1,c=[],l=!1,h=new o;return h.readable=h.writable=!0,h.paused=!1,h.autoDestroy=!(n&&!1===n.autoDestroy),h.write=function(e){return t.call(this,e),!h.paused},h.queue=h.push=function(t){return l?h:(null===t&&(l=!0),c.push(t),i(),h)},h.on("end",function(){h.readable=!1,!h.writable&&h.autoDestroy&&r.nextTick(function(){h.destroy()})}),h.end=function(t){if(!s)return s=!0,arguments.length&&h.write(t),a(),h},h.destroy=function(){if(!u)return u=!0,s=!0,c.length=0,h.writable=h.readable=!1,h.emit("close"),h},h.pause=function(){if(!h.paused)return h.paused=!0,h},h.resume=function(){return h.paused&&(h.paused=!1,h.emit("resume")),i(),h.paused||h.emit("drain"),h},h}var o=n(24);e=t.exports=i,i.through=i}).call(e,n(6))},function(t,e,n){"use strict";function r(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function i(t,e,n){var r=t;return c(e)?(n=e,"string"==typeof t&&(r={uri:t})):r=h(e,{uri:t}),r.callback=n,r}function o(t,e,n){return e=i(t,e,n),a(e)}function a(t){function e(){var t=void 0;if(t=c.response?c.response:c.responseText||s(c),y)try{t=JSON.parse(t)}catch(t){}return t}function n(t){return clearTimeout(d),t instanceof Error||(t=new Error(""+(t||"Unknown XMLHttpRequest Error"))),t.statusCode=0,u(t,w)}function i(){if(!f){var n;clearTimeout(d),n=t.useXDR&&void 0===c.status?200:1223===c.status?204:c.status;var r=w,i=null;return 0!==n?(r={body:e(),statusCode:n,method:m,headers:{},url:p,rawRequest:c},c.getAllResponseHeaders&&(r.headers=l(c.getAllResponseHeaders()))):i=new Error("Internal XMLHttpRequest Error"),u(i,r,r.body)}}if(void 0===t.callback)throw new Error("callback argument missing");var a=!1,u=function(e,n,r){a||(a=!0,t.callback(e,n,r))},c=t.xhr||null;c||(c=t.cors||t.useXDR?new o.XDomainRequest:new o.XMLHttpRequest);var h,f,d,p=c.url=t.uri||t.url,m=c.method=t.method||"GET",v=t.body||t.data,b=c.headers=t.headers||{},g=!!t.sync,y=!1,w={body:void 0,headers:{},statusCode:0,method:m,url:p,rawRequest:c};if("json"in t&&!1!==t.json&&(y=!0,b.accept||b.Accept||(b.Accept="application/json"),"GET"!==m&&"HEAD"!==m&&(b["content-type"]||b["Content-Type"]||(b["Content-Type"]="application/json"),v=JSON.stringify(!0===t.json?v:t.json))),c.onreadystatechange=function(){4===c.readyState&&setTimeout(i,0)},c.onload=i,c.onerror=n,c.onprogress=function(){},c.onabort=function(){f=!0},c.ontimeout=n,c.open(m,p,!g,t.username,t.password),g||(c.withCredentials=!!t.withCredentials),!g&&t.timeout>0&&(d=setTimeout(function(){if(!f){f=!0,c.abort("timeout");var t=new Error("XMLHttpRequest timeout");t.code="ETIMEDOUT",n(t)}},t.timeout)),c.setRequestHeader)for(h in b)b.hasOwnProperty(h)&&c.setRequestHeader(h,b[h]);else if(t.headers&&!r(t.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in t&&(c.responseType=t.responseType),"beforeSend"in t&&"function"==typeof t.beforeSend&&t.beforeSend(c),c.send(v||null),c}function s(t){if("document"===t.responseType)return t.responseXML;var e=t.responseXML&&"parsererror"===t.responseXML.documentElement.nodeName;return""!==t.responseType||e?null:t.responseXML}var u=n(65),c=n(30),l=n(66),h=n(69);t.exports=o,o.XMLHttpRequest=u.XMLHttpRequest||function(){},o.XDomainRequest="withCredentials"in new o.XMLHttpRequest?o.XMLHttpRequest:u.XDomainRequest,function(t,e){for(var n=0;n<t.length;n++)e(t[n])}(["get","put","post","patch","head","delete"],function(t){o["delete"===t?"del":t]=function(e,n,r){return n=i(e,n,r),n.method=t.toUpperCase(),a(n)}})},function(t,e,n){(function(e){var n;n="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},t.exports=n}).call(e,n(3))},function(t,e,n){var r=n(67),i=n(68),o=function(t){return"[object Array]"===Object.prototype.toString.call(t)};t.exports=function(t){if(!t)return{};var e={};return i(r(t).split("\n"),function(t){var n=t.indexOf(":"),i=r(t.slice(0,n)).toLowerCase(),a=r(t.slice(n+1));void 0===e[i]?e[i]=a:o(e[i])?e[i].push(a):e[i]=[e[i],a]}),e}},function(t,e){(e=t.exports=function(t){return t.replace(/^\s*|\s*$/g,"")}).left=function(t){return t.replace(/^\s*/,"")},e.right=function(t){return t.replace(/\s*$/,"")}},function(t,e,n){function r(t,e,n){for(var r=0,i=t.length;r<i;r++)u.call(t,r)&&e.call(n,t[r],r,t)}function i(t,e,n){for(var r=0,i=t.length;r<i;r++)e.call(n,t.charAt(r),r,t)}function o(t,e,n){for(var r in t)u.call(t,r)&&e.call(n,t[r],r,t)}var a=n(30);t.exports=function(t,e,n){if(!a(e))throw new TypeError("iterator must be a function");arguments.length<3&&(n=this),"[object Array]"===s.call(t)?r(t,e,n):"string"==typeof t?i(t,e,n):o(t,e,n)};var s=Object.prototype.toString,u=Object.prototype.hasOwnProperty},function(t,e){t.exports=function(){for(var t={},e=0;e<arguments.length;e++){var r=arguments[e];for(var i in r)n.call(r,i)&&(t[i]=r[i])}return t};var n=Object.prototype.hasOwnProperty},function(t,e,n){"use strict";class r{constructor(){}loadImages(t){let e=[];return Object.entries(t).forEach(([t,n])=>{const r=new Promise(e=>{const r=new Image;r.onload=(()=>{const n={[t]:{width:r.width,height:r.height,data:r}};e(n)}),r.src=n});e.push(r)}),Promise.all(e)}}e.a=r}])});